<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å®‹æµ©å¿—çš„åšå®¢</title>
  
  
  <link href="https://www.songhaozhi.com/atom.xml" rel="self"/>
  
  <link href="https://www.songhaozhi.com/"/>
  <updated>2022-11-14T03:45:42.956Z</updated>
  <id>https://www.songhaozhi.com/</id>
  
  <author>
    <name>å®‹æµ©å¿—</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SpringBootæ•´åˆSocket</title>
    <link href="https://www.songhaozhi.com/2022/10/27/SpringBoot%E6%95%B4%E5%90%88Socket/"/>
    <id>https://www.songhaozhi.com/2022/10/27/SpringBoot%E6%95%B4%E5%90%88Socket/</id>
    <published>2022-10-27T09:57:01.000Z</published>
    <updated>2022-11-14T03:45:42.956Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å‰æ®µæ—¶é—´å…¬å¸ä¸€ä¸ªç‰©è”ç½‘é¡¹ç›®éœ€è¦é€šè¿‡TCPè¿æ¥è®¾å¤‡æ”¶å‘æ¶ˆæ¯ï¼Œç°åœ¨æˆ‘æŠŠä»£ç æ•´ç†å‡ºæ¥ï¼Œåˆ†äº«ä¸€ä¸‹ã€‚</p><p>æºä»£ç å·²å‘å¸ƒåœ¨<a href="https://github.com/gujiniCY/socket_demo">GitHub</a></p><h2 id="åˆ›å»ºSocket"><a href="#åˆ›å»ºSocket" class="headerlink" title="åˆ›å»ºSocket"></a>åˆ›å»ºSocket</h2><p>ä½¿ç”¨<code>ServerSocket</code>ç»‘å®š<code>IP</code>å’Œç«¯å£ï¼Œ</p><p><code>TcpSocket</code>å®ç°Javaçš„<code>Runnable</code>çš„ç±»ï¼Œåœ¨<code>run</code>æ–¹æ³•ä¸­ä½¿ç”¨<code>Accept</code>ç›‘å¬ç«¯å£æ˜¯å¦æœ‰å®¢æˆ·ç«¯å‘é€è¿æ¥è¯·æ±‚ï¼Œå¦‚æœæœ‰è¿æ¥æ¥äº†å°±åˆ›å»º<code>SocketReceive</code>å¯¹è±¡ç„¶åå°†ä»–æ‰”ç»™çº¿ç¨‹æ± æ‰§è¡Œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.example.socket_demo.socket;<br><br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.net.ServerSocket;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService;<br><span class="hljs-keyword">import</span> java.util.concurrent.Executors;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TcpSocket</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-keyword">public</span> Integer port;<br>    <span class="hljs-keyword">private</span> ServerSocket server;<br>    <span class="hljs-keyword">private</span> ExecutorService threadPool;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">TcpSocket</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            port = <span class="hljs-number">8081</span>;<br>            threadPool = Executors.newCachedThreadPool();<br>            server = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(port);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            log.error(e.getMessage());<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> server.accept();<br>                <span class="hljs-keyword">if</span> (socket != <span class="hljs-literal">null</span>) &#123;<br>                    <span class="hljs-type">SocketReceive</span> <span class="hljs-variable">socketReceive</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SocketReceive</span>(socket);<br>                    threadPool.submit(socketReceive);<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="åœ¨çº¿è¿æ¥"><a href="#åœ¨çº¿è¿æ¥" class="headerlink" title="åœ¨çº¿è¿æ¥"></a>åœ¨çº¿è¿æ¥</h2><p><code>AllClientsMap</code>ç±»å­˜æ”¾äº†æ‰€æœ‰çš„åœ¨çº¿è¿æ¥ï¼Œé€šè¿‡<code>hostAddress</code>ä¸º<code>key</code>ï¼Œ<code>Socket</code>ä¸º<code>Value</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.example.socket_demo.socket;<br><br><br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><br><span class="hljs-keyword">import</span> java.net.Socket;<br><span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentHashMap;<br><span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentMap;<br><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AllClientsMap</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ‰€æœ‰å·²è¿æ¥è®¾å¤‡</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ConcurrentMap&lt;String, Socket&gt; ALLCLIENTS = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¿”å›è®¾å¤‡åˆ—è¡¨</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ConcurrentMap&lt;String, Socket&gt; <span class="hljs-title function_">getAllClients</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> ALLCLIENTS;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é€šè¿‡keyè·å–å®¢æˆ·ç«¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Socket <span class="hljs-title function_">getSocketByKey</span><span class="hljs-params">(String key)</span> &#123;<br>        <span class="hljs-keyword">return</span> ALLCLIENTS.get(key);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ·»åŠ è®¾å¤‡åˆ°åˆ—è¡¨</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> socket</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">put</span><span class="hljs-params">(String key, Socket socket)</span> &#123;<br>        ALLCLIENTS.put(key, socket);<br>        log.info(<span class="hljs-string">&quot;è®¾å¤‡Key:&#123;&#125;========ip:&#123;&#125;å·²åŠ å…¥åˆ—è¡¨&quot;</span>, key, socket.getInetAddress().getHostAddress());<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç§»é™¤è®¾å¤‡</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(String key)</span> &#123;<br>        ALLCLIENTS.remove(key);<br>        log.info(<span class="hljs-string">&quot;å·²ç§»é™¤è®¾å¤‡Key:&#123;&#125;&quot;</span>, key);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¿”å›å·²è¿æ¥è®¾å¤‡æ•°é‡</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">size</span><span class="hljs-params">()</span> &#123;<br>        log.info(<span class="hljs-string">&quot;å½“å‰è®¾å¤‡æ•°ï¼š&#123;&#125;&quot;</span>, ALLCLIENTS.size());<br>        <span class="hljs-keyword">return</span> ALLCLIENTS.size();<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ‰“å°ä¿¡æ¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span> &#123;<br>        log.info(<span class="hljs-string">&quot;å½“å‰è®¾å¤‡åˆ—è¡¨ä¿¡æ¯:é•¿åº¦ï¼š&#123;&#125;&quot;</span>, ALLCLIENTS.size());<br>        ALLCLIENTS.forEach((key, socket) -&gt; &#123;<br>            log.info(<span class="hljs-string">&quot;è®¾å¤‡Key:&#123;&#125;========ip:&#123;&#125;&quot;</span>, key, socket.getInetAddress().getHostAddress());<br>        &#125;);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ˜¯å¦åŒ…å«</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">contains</span><span class="hljs-params">(String key)</span> &#123;<br>        <span class="hljs-keyword">return</span> ALLCLIENTS.containsKey(key);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="åˆ›å»ºSocketReceive"><a href="#åˆ›å»ºSocketReceive" class="headerlink" title="åˆ›å»ºSocketReceive"></a>åˆ›å»ºSocketReceive</h2><p>åœ¨<code>SocketReceive</code>ç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œç›¸å…³çš„æ¥æ”¶æ¶ˆæ¯ï¼Œä»¥åŠä¸šåŠ¡æ“ä½œï¼›åœ¨ç¬¬<code>64</code>è¡Œä»£ç çš„ä½ç½®ï¼Œå¯ä»¥é€šè¿‡<code>ApplicationContext</code>è·å–<code>Spring Bean</code>æ‰§è¡Œä¸šåŠ¡ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.example.socket_demo.socket;<br><br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><br><span class="hljs-keyword">import</span> java.io.DataInputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.OutputStream;<br><span class="hljs-keyword">import</span> java.net.Socket;<br><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocketReceive</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-keyword">private</span> Socket socket;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SocketReceive</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SocketReceive</span><span class="hljs-params">(Socket socket)</span> &#123;<br>        <span class="hljs-built_in">this</span>.socket = socket;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == socket) &#123;<br>                log.info(<span class="hljs-string">&quot;socketä¸ºç©º&quot;</span>);<br>                <span class="hljs-keyword">return</span>;<br>            &#125;<br>            <span class="hljs-type">boolean</span> <span class="hljs-variable">isClosed</span> <span class="hljs-operator">=</span> socket.isClosed();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">hostAddress</span> <span class="hljs-operator">=</span> socket.getInetAddress().getHostAddress();<br>            <span class="hljs-keyword">if</span> (isClosed) &#123;<br>                log.info(<span class="hljs-string">&quot;socketæ£€æµ‹åˆ°å…³é—­äº†&quot;</span>);<br>                <span class="hljs-keyword">if</span> (AllClientsMap.contains(hostAddress)) &#123;<br>                    AllClientsMap.remove(hostAddress);<br>                    AllClientsMap.print();<br>                &#125;<br>                <span class="hljs-keyword">return</span>;<br>            &#125;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">hostAddress</span> <span class="hljs-operator">=</span> socket.getInetAddress().getHostAddress();<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">//å»ºç«‹å®¢æˆ·ç«¯ä¿¡æ¯è¾“å…¥æµ</span><br>                <span class="hljs-type">DataInputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataInputStream</span>(socket.getInputStream());<br>                <span class="hljs-comment">//å®šä¹‰å­—èŠ‚æ•°ç»„è¯»å–æ•°æ®</span><br>                <span class="hljs-type">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>                <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> in.read(bytes);<br>                <span class="hljs-keyword">if</span> (len == -<span class="hljs-number">1</span>) &#123;<br>                    <span class="hljs-keyword">return</span>;<br>                &#125;<br>                <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªæ–°æ•°ç»„copyï¼Œè§£å†³è¯»å–å‡ºæ¥çš„æ•°æ®å­—èŠ‚ä¸å¤Ÿå…¨æ˜¯0çš„é—®é¢˜</span><br>                <span class="hljs-type">byte</span>[] bytes1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[len];<br>                System.arraycopy(bytes, <span class="hljs-number">0</span>, bytes1, <span class="hljs-number">0</span>, len);<br>                log.info(<span class="hljs-string">&quot;å®¢æˆ·ç«¯ä¼ çš„byteå­—èŠ‚æ•°ç»„ï¼š&quot;</span> + printBytesByStringBuilder(bytes1));<br>                <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(bytes1);<br>                log.info(<span class="hljs-string">&quot;å®¢æˆ·ç«¯ä¼ çš„byteå­—èŠ‚æ•°ç»„è½¬æ¢æˆå­—ç¬¦ä¸²æ‰“å°:&quot;</span> + s);<br>                <span class="hljs-comment">//è½¬æ¢hexæ•°æ®</span><br>                <span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> byteArrayToHex(bytes1);<br>                log.info(<span class="hljs-string">&quot;æ¥æ”¶çš„16è¿›åˆ¶æ•°æ®:&quot;</span> + data);<br>                <span class="hljs-comment">//å¦‚æœæœåŠ¡ç«¯æ²¡æœ‰ä¿å­˜è¯¥socket</span><br>                <span class="hljs-keyword">if</span>(!AllClientsMap.contains(hostAddress))&#123;<br>                    AllClientsMap.put(hostAddress, socket);<br>                    AllClientsMap.print();<br>                &#125;<br>                log.debug(<span class="hljs-string">&quot;å®¢æˆ·ç«¯&quot;</span> + hostAddress + <span class="hljs-string">&quot;å‘é€æ•°æ®ï¼š&#123;&#125;&quot;</span>, data);<br>                <span class="hljs-comment">//æ‰§è¡Œä¸šåŠ¡</span><br>                System.out.println(<span class="hljs-string">&quot;æ‰§è¡Œä¸šåŠ¡&quot;</span>);<br><br>                <span class="hljs-comment">//ä»mapä¸­è·å–å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯</span><br>                response(AllClientsMap.getSocketByKey(hostAddress), data);<br><br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                <span class="hljs-keyword">if</span> (AllClientsMap.contains(hostAddress)) &#123;<br>                    AllClientsMap.remove(hostAddress);<br>                    AllClientsMap.print();<br>                &#125;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    socket.close();<br>                    log.error(<span class="hljs-string">&quot;&#123;&#125;æ–­å¼€è¿æ¥&quot;</span>, hostAddress);<br>                    <span class="hljs-keyword">return</span>;<br>                &#125; <span class="hljs-keyword">catch</span> (IOException ioException) &#123;<br>                    log.error(ioException.getMessage());<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ®å­—èŠ‚æ•°ç»„ï¼Œè¾“å‡ºå¯¹åº”çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bytes å­—èŠ‚æ•°ç»„</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> å­—èŠ‚æ•°ç»„å­—ç¬¦ä¸²</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">printBytesByStringBuilder</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] bytes)</span> &#123;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">stringBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">byte</span> aByte : bytes) &#123;<br>            stringBuilder.append(byte2String(aByte));<br>        &#125;<br>        <span class="hljs-keyword">return</span> stringBuilder.toString();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">byte2String</span><span class="hljs-params">(<span class="hljs-type">byte</span> b)</span> &#123;<br>        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">&quot;%02x &quot;</span>, b);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å‘socketå‘é€æ¶ˆæ¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> socket å¯¹åº”socket</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> msg    æ¶ˆæ¯</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">response</span><span class="hljs-params">(Socket socket, String msg)</span> &#123;<br>        log.debug(<span class="hljs-string">&quot;å‘è®¾å¤‡IPï¼š&#123;&#125;å‘é€æ¶ˆæ¯ï¼š&#123;&#125;&quot;</span>, socket.getInetAddress().getHostAddress(), msg);<br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            outputStream = socket.getOutputStream();<br>            outputStream.write(hexStringToByteArray(msg));<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                socket.close();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException ioException) &#123;<br>                log.error(ioException.getMessage());<br>            &#125;<br>            log.error(e.getMessage());<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å­—èŠ‚æ•°ç»„è½¬å­—ç¬¦ä¸²</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bytes</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">byteArrayToHex</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] bytes)</span> &#123;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, len = bytes.length; index &lt;= len - <span class="hljs-number">1</span>; index += <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">char1</span> <span class="hljs-operator">=</span> ((bytes[index] &gt;&gt; <span class="hljs-number">4</span>) &amp; <span class="hljs-number">0xF</span>);<br>            <span class="hljs-type">char</span> <span class="hljs-variable">chara1</span> <span class="hljs-operator">=</span> Character.forDigit(char1, <span class="hljs-number">16</span>);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">char2</span> <span class="hljs-operator">=</span> ((bytes[index]) &amp; <span class="hljs-number">0xF</span>);<br>            <span class="hljs-type">char</span> <span class="hljs-variable">chara2</span> <span class="hljs-operator">=</span> Character.forDigit(char2, <span class="hljs-number">16</span>);<br>            result.append(chara1);<br>            result.append(chara2);<br>        &#125;<br>        <span class="hljs-keyword">return</span> result.toString();<br>    &#125;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 16è¿›åˆ¶è¡¨ç¤ºçš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> hexString 16è¿›åˆ¶è¡¨ç¤ºçš„å­—ç¬¦ä¸²</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> byte[] å­—èŠ‚æ•°ç»„</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">byte</span>[] hexStringToByteArray(String hexString) &#123;<br>        hexString = hexString.replaceAll(<span class="hljs-string">&quot; &quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> hexString.length();<br>        <span class="hljs-type">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[len / <span class="hljs-number">2</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; len; i += <span class="hljs-number">2</span>) &#123;<br>            <span class="hljs-comment">// ä¸¤ä½ä¸€ç»„ï¼Œè¡¨ç¤ºä¸€ä¸ªå­—èŠ‚,æŠŠè¿™æ ·è¡¨ç¤ºçš„16è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œè¿˜åŸæˆä¸€ä¸ªå­—èŠ‚</span><br>            bytes[i / <span class="hljs-number">2</span>] = (<span class="hljs-type">byte</span>) ((Character.digit(hexString.charAt(i), <span class="hljs-number">16</span>) &lt;&lt; <span class="hljs-number">4</span>) + Character<br>                    .digit(hexString.charAt(i + <span class="hljs-number">1</span>), <span class="hljs-number">16</span>));<br>        &#125;<br>        <span class="hljs-keyword">return</span> bytes;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h2><p>é€šè¿‡ç»§æ‰¿<code>Spring</code>çš„<code>InitializingBean</code>ç±»ï¼Œé‡å†™<code>afterPropertiesSet</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å°†åœ¨æ‰€æœ‰çš„å±æ€§è¢«åˆå§‹åŒ–åè°ƒç”¨ã€‚<br>ç„¶åä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ<code>ServerSocket</code>çš„ç›‘å¬ï¼Œåˆå§‹åŒ–æˆ‘ä»¬çš„<code>TcpSocket</code>å¯¹è±¡ï¼Œä¸€æ—¦<code>Server</code>æ¥æ”¶åˆ°äº†è¿æ¥è¯·æ±‚åï¼Œä¼šåˆ›å»ºä¸€ä¸ª<code>SocketReceive</code>å¯¹è±¡å°†å…¶æ‰”ç»™çº¿ç¨‹æ± æ‰§è¡Œï¼Œåœ¨çº¿ç¨‹æ± ä¸­çš„<code>SocketReceive</code>å¯¹è±¡å¯ä»¥é€šè¿‡<code>ApplicationContext</code>è·å–<code>Spring Bean</code>æ‰§è¡Œä¸šåŠ¡ä»£ç ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.example.socket_demo.socket;<br><br><span class="hljs-keyword">import</span> org.springframework.beans.factory.InitializingBean;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringFinishedListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InitializingBean</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> TcpSocket tcpsocket;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterPropertiesSet</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">serverThread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(tcpsocket);<br>        serverThread.start();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="æµ‹è¯•å·¥å…·"><a href="#æµ‹è¯•å·¥å…·" class="headerlink" title="æµ‹è¯•å·¥å…·"></a>æµ‹è¯•å·¥å…·</h2><p>è¿™é‡Œæ¨èä¸€ä¸ªæµ‹è¯•å·¥å…·ï¼Œè¿˜æŒºå¥½ç”¨çš„ã€‚<a href="https://github.com/gujiniCY/gujiniCY.github.io/raw/main/2022/10/27/SpringBoot%E6%95%B4%E5%90%88Socket/PortHelper(%E5%8D%95%E7%89%87%E6%9C%BA%E5%A4%9A%E5%8A%9F%E8%83%BD%E8%B0%83%E8%AF%95%E5%8A%A9%E6%89%8B).exe" title="å•ç‰‡æœºå¤šåŠŸèƒ½è°ƒè¯•åŠ©æ‰‹">ä¸‹è½½è¿æ¥</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;å‰æ®µæ—¶é—´å…¬å¸ä¸€ä¸ªç‰©è”ç½‘é¡¹ç›®éœ€è¦é€šè¿‡TCPè¿æ¥è®¾å¤‡æ”¶å‘æ¶ˆæ¯ï¼Œç°åœ¨æˆ‘æŠŠä»£ç æ•´ç†å‡ºæ¥ï¼Œåˆ†äº«ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;æºä»£ç å·²å‘å¸ƒåœ¨&lt;a href=&quot;h</summary>
      
    
    
    
    <category term="Java" scheme="https://www.songhaozhi.com/categories/Java/"/>
    
    <category term="Socket" scheme="https://www.songhaozhi.com/categories/Socket/"/>
    
    <category term="TCP" scheme="https://www.songhaozhi.com/categories/TCP/"/>
    
    
    <category term="Java" scheme="https://www.songhaozhi.com/tags/Java/"/>
    
    <category term="Socket" scheme="https://www.songhaozhi.com/tags/Socket/"/>
    
    <category term="TCP" scheme="https://www.songhaozhi.com/tags/TCP/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨codingæŒç»­é›†æˆSpringBooté¡¹ç›®</title>
    <link href="https://www.songhaozhi.com/2022/10/17/%E4%BD%BF%E7%94%A8coding%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90SpringBoot%E9%A1%B9%E7%9B%AE/"/>
    <id>https://www.songhaozhi.com/2022/10/17/%E4%BD%BF%E7%94%A8coding%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90SpringBoot%E9%A1%B9%E7%9B%AE/</id>
    <published>2022-10-17T02:30:56.000Z</published>
    <updated>2022-11-14T03:45:42.988Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å…¬å¸é¡¹ç›®ä½¿ç”¨Codingè¿›è¡Œç®¡ç†ï¼Œæ¯æ¬¡æ‰“åŒ…éƒ¨ç½²éƒ½éœ€è¦ç»å†ä»¥ä¸‹æµç¨‹</p><ul><li>ä»£ç æäº¤</li><li>é¡¹ç›®æ‰“åŒ…</li><li>ç™»å½•æœåŠ¡å™¨</li><li>ä¸Šä¼ åº”ç”¨åˆ°æœåŠ¡å™¨</li><li>æ‰§è¡Œéƒ¨ç½²è„šæœ¬</li><li>å‘ç°Bug -&gt;ä¿®æ”¹Bug -&gt; é‡å¤ç¬¬ä¸€é“æµç¨‹</li></ul><p>äº†è§£è¿‡Jenkinsç­‰æŒç»­é›†æˆå·¥å…·åï¼ŒæŸ¥çœ‹åˆ°Codingä¹Ÿæœ‰ç›¸å…³æœåŠ¡ï¼Œå¹¶ä¸”Codingè¿˜æä¾›ä¸€å°äº‘ä¸»æœºæ¥è¿›è¡Œæ„å»ºæ“ä½œã€‚</p><p>å¦‚æœä½ ä¹Ÿé•¿æœŸç»å†ä»¥ä¸Šæµç¨‹ï¼Œå¼ºçƒˆå»ºè®®ä½ äº†è§£ä¸€ä¸‹æŒç»­é›†æˆï¼Œå› ä¸ºæ‰‹åŠ¨éƒ¨ç½²å®åœ¨æ˜¯éº»çƒ¦åˆè€—æ—¶ï¼Œä½¿ç”¨æŒç»­é›†æˆåçœä¸‹çš„æ—¶é—´åˆå¯ä»¥å¤šå†™ä¸¤è¡ŒBugäº†ğŸ¤ª</p><h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>æˆ‘ä»¬å¸Œæœ›æ¯æ¬¡å†™å®Œä»£ç ï¼Œæäº¤åˆ°ä¸»åˆ†æ”¯ä»¥åï¼Œé¡¹ç›®èƒ½å¤Ÿè‡ªåŠ¨ç¼–è¯‘æ‰“åŒ…ï¼Œä¸Šä¼ è‡³æœåŠ¡å™¨ï¼Œå¹¶è‡ªåŠ¨é‡å¯åº”ç”¨</p><h2 id="å‰æœŸå·¥ä½œ"><a href="#å‰æœŸå·¥ä½œ" class="headerlink" title="å‰æœŸå·¥ä½œ"></a>å‰æœŸå·¥ä½œ</h2><h3 id="å‡­è¯ç®¡ç†"><a href="#å‡­è¯ç®¡ç†" class="headerlink" title="å‡­è¯ç®¡ç†"></a>å‡­è¯ç®¡ç†</h3><p>å®˜æ–¹æ–‡æ¡£ï¼Œå‡­è¯ç®¡ç† <a href="https://coding.net/help/docs/project-settings/credential.html">https://coding.net/help/docs/project-settings/credential.html</a></p><h4 id="ç”ŸæˆRsaç§é’¥"><a href="#ç”ŸæˆRsaç§é’¥" class="headerlink" title="ç”ŸæˆRsaç§é’¥"></a>ç”ŸæˆRsaç§é’¥</h4><p>ç™»å½•æœåŠ¡å™¨ï¼Œç”ŸæˆRsaç§é’¥</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ssh-keygen -t rsa</span><br></code></pre></td></tr></table></figure><p>ç”Ÿæˆå¥½çš„æ–‡ä»¶åœ¨<code>/root/.ssh</code>è·¯å¾„ä¸‹</p><p>å°†<code>id_rsa.pub</code>æ·»åŠ åˆ°<code>authorized_keys</code>æ–‡ä»¶ä¸­ï¼Œå¹¶é‡å¯sshdæœåŠ¡</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">systemctl  restart sshd</span><br></code></pre></td></tr></table></figure><h4 id="æ·»åŠ è‡³Codingå‡­è¯ç®¡ç†"><a href="#æ·»åŠ è‡³Codingå‡­è¯ç®¡ç†" class="headerlink" title="æ·»åŠ è‡³Codingå‡­è¯ç®¡ç†"></a>æ·»åŠ è‡³Codingå‡­è¯ç®¡ç†</h4><p>1.å°†id_rsaæ–‡ä»¶ä¸­çš„å†…å®¹æ·»åŠ è‡³Coding</p><p><img src="/2022/10/17/%E4%BD%BF%E7%94%A8coding%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90SpringBoot%E9%A1%B9%E7%9B%AE/2022-10-17-11-26-16.png"></p><p>2.åœ¨å½•å…¥å‡­æ®é¡µé¢ï¼Œè¾“å…¥ç›¸å…³ä¿¡æ¯</p><ul><li>é€‰æ‹©ã€ŒSSH ç§é’¥ã€å‡­æ®ç±»å‹</li><li>è¾“å…¥å‡­æ®åç§°ï¼Œå¿…å¡«é¡¹ï¼Œé•¿åº¦ä¸è¶…è¿‡ 255 ä¸ªå­—ç¬¦</li><li>è¾“å…¥ SSH ç§é’¥ï¼Œå¿…å¡«é¡¹</li><li>è¾“å…¥ç§é’¥å£ä»¤ï¼Œéå¿…å¡«</li><li>è¾“å…¥æè¿°ï¼Œéå¿…å¡«</li></ul><p>3.å‹¾é€‰éœ€è¦æˆæƒçš„æŒç»­é›†æˆåŠŸèƒ½ã€‚åªæœ‰è¿›è¡Œå‡­æ®æˆæƒåï¼Œåœ¨ä½¿ç”¨ CODING æŒç»­é›†æˆåŠŸèƒ½æ¨¡å—åˆ›å»ºæ„å»ºè®¡åˆ’æ—¶æ‰æœ‰æƒé™ä½¿ç”¨è¯¥å‡­æ®ã€‚</p><p>4.ç‚¹å‡»ã€Œåˆ›å»ºã€å³å¯å®Œæˆåˆ›å»ºã€‚å½•å…¥æˆåŠŸçš„å‡­æ®ä¼šæ˜¾ç¤ºåœ¨å‡­æ®ç®¡ç†é¡µé¢ã€‚</p><h3 id="ç™½åå•é‡Šæ”¾"><a href="#ç™½åå•é‡Šæ”¾" class="headerlink" title="ç™½åå•é‡Šæ”¾"></a>ç™½åå•é‡Šæ”¾</h3><p>å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„æœåŠ¡å™¨ï¼Œæ‰€ä»¥éœ€è¦é‡Šæ”¾Codingçš„IPï¼Œå¦‚æœä½ ä½¿ç”¨çš„ä¸æ˜¯é˜¿é‡Œäº‘å¯å¿½ç•¥</p><p>Codingæ–‡æ¡£ï¼š<a href="https://coding.net/help/docs/ci/faq/job-fail.html#aliyun">https://coding.net/help/docs/ci/faq/job-fail.html#aliyun</a></p><p>æ‰§è¡Œ SSH å‘½ä»¤è®¿é—®é˜¿é‡Œäº‘ä¸»æœºæ—¶æç¤º Connection reset é”™è¯¯ã€‚</p><p>æ­¤é—®é¢˜æ˜¯é˜¿é‡Œäº‘ä¾§ç™½åå•æœªæ”¾è¡Œ CODING IP æ‰€è‡´ã€‚å‰å¾€é˜¿é‡Œäº‘ã€Œå®‰å…¨ç®¡æ§å¹³å°ã€â†’ã€Œå®‰å…¨ç®¡æ§ã€â†’ã€Œæ–°å¢è®¿é—®ç™½åå•ã€ï¼Œå°†æ„å»ºæœºçš„ IP åŠ å…¥è‡³ç™½åå•ä¸­å¯ä»¥é˜²æ­¢å…¶åœ¨è®¿é—®äº‘ä¸»æœºæ—¶è¢«æ‹¦æˆªã€‚</p><p>CODING æ„å»ºæœºæ‰€ä½¿ç”¨çš„å‡ºå£ IP å¦‚ä¸‹ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"># ä¸­å›½ä¸Šæµ·èŠ‚ç‚¹<br> <br><span class="hljs-number">111.231.92.100</span><br> <br><span class="hljs-number">81.68.101.44</span><br> <br># ä¸­å›½é¦™æ¸¯èŠ‚ç‚¹<br> <br><span class="hljs-number">124.156.164.25</span><br> <br><span class="hljs-number">119.28.15.65</span><br> <br># ç¾å›½ç¡…è°·èŠ‚ç‚¹<br> <br><span class="hljs-number">170.106.136.17</span><br> <br><span class="hljs-number">170.106.83.77</span><br></code></pre></td></tr></table></figure><h2 id="æ„å»ºè®¡åˆ’"><a href="#æ„å»ºè®¡åˆ’" class="headerlink" title="æ„å»ºè®¡åˆ’"></a>æ„å»ºè®¡åˆ’</h2><h3 id="åˆ›å»ºæ„å»ºè®¡åˆ’"><a href="#åˆ›å»ºæ„å»ºè®¡åˆ’" class="headerlink" title="åˆ›å»ºæ„å»ºè®¡åˆ’"></a>åˆ›å»ºæ„å»ºè®¡åˆ’</h3><p>é¦–å…ˆè¿›å…¥Codingçš„é¡¹ç›®ä¸­ï¼Œæ‰¾åˆ°æŒç»­é›†æˆ-æ„å»ºè®¡åˆ’ï¼Œæ–°å»ºæ„å»ºè®¡åˆ’</p><p><img src="/2022/10/17/%E4%BD%BF%E7%94%A8coding%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90SpringBoot%E9%A1%B9%E7%9B%AE/2022-10-17-11-01-21.png"></p><p>ç‚¹å‡»è‡ªå®šä¹‰æ„å»ºæµç¨‹<br><img src="/2022/10/17/%E4%BD%BF%E7%94%A8coding%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90SpringBoot%E9%A1%B9%E7%9B%AE/2022-10-17-11-04-03.png"></p><h3 id="Jenkinsfile"><a href="#Jenkinsfile" class="headerlink" title="Jenkinsfile"></a>Jenkinsfile</h3><p>åˆ›å»ºè‡ªå®šä¹‰æµç¨‹ä»¥åæˆ‘ä»¬å¼€å§‹ç¼–å†™Jenkinsfile</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs pipeline"><br>pipeline &#123;<br>  agent any<br>  stages &#123;<br>    stage(&#x27;æ£€å‡º&#x27;) &#123;<br>      steps &#123;<br>        checkout([<br>          $class: &#x27;GitSCM&#x27;,<br>          branches: [[name: GIT_BUILD_REF]],<br>          userRemoteConfigs: [[<br>            url: GIT_REPO_URL,<br>            credentialsId: CREDENTIALS_ID<br>          ]]])<br>        &#125;<br>      &#125;<br><br>      stage(&#x27;ç¼–è¯‘&#x27;) &#123;<br>        steps &#123;<br>          echo &#x27;æ„å»ºä¸­...&#x27;<br>          sh &#x27;mvn clean package&#x27;<br>          echo &#x27;æ„å»ºå®Œæˆ&#x27;<br>          echo &#x27;å½“å‰æ‰€åœ¨ä½ç½®:&#x27;<br>          sh &#x27;&#x27;&#x27;pwd<br>ls&#x27;&#x27;&#x27;<br>          sh &#x27;&#x27;&#x27;ls $&#123;project_target_path&#125;<br>&#x27;&#x27;&#x27;<br>          sh &#x27;&#x27;&#x27;tar -zcf /root/workspace/tmp.tar.gz $&#123;project_target_path&#125;/*.jar<br>ls /root/workspace/&#x27;&#x27;&#x27;<br>        &#125;<br>      &#125;<br><br>      stage(&#x27;é‡å¯åº”ç”¨&#x27;) &#123;<br>        steps &#123;<br>          echo &#x27;å¼€å§‹å‘é€æ–‡ä»¶åˆ°è¿œç«¯æœåŠ¡å™¨...&#x27;<br>          script &#123;<br>            def remote = [:]<br>            remote.name = &#x27;web-server&#x27;<br>            remote.allowAnyHosts = true<br>            remote.host = host<br>            remote.port = port as Integer<br>            remote.user = user<br>            // æŠŠã€ŒCODING å‡­æ®ç®¡ç†ã€ä¸­çš„ã€Œå‡­æ® IDã€å¡«å…¥ credentialsIdï¼Œè€Œ id_rsa æ— éœ€ä¿®æ”¹<br>            withCredentials([sshUserPrivateKey(credentialsId: credentialsId, keyFileVariable: &#x27;id_rsa&#x27;)]) &#123;<br>              remote.identityFile = id_rsa<br>              // SSH ä¸Šä¼ æ–‡ä»¶åˆ°è¿œç«¯æœåŠ¡å™¨<br>              sshPut remote: remote, from: &quot;/root/workspace/tmp.tar.gz&quot;, into: &#x27;/tmp/&#x27;<br>              // è§£å‹ç¼©<br>              sshCommand remote: remote, command: &quot;tar -zxf /tmp/tmp.tar.gz -C /tmp/&quot;<br>              //å¤åˆ¶æ–‡ä»¶åˆ°è¿è¡Œç›®å½•<br>              sshCommand remote: remote, sudo: true, command: &quot;cp -R /tmp/$&#123;project_target_path&#125;/* $&#123;project_path&#125;&quot;<br>              //æ‰§è¡Œè„šæœ¬é‡å¯åº”ç”¨<br>              sshCommand remote: remote, sudo: true, command: sh_path_command<br><br><br>            &#125;<br>          &#125;<br><br>          echo &#x27;éƒ¨ç½²æˆåŠŸ...&#x27;<br>        &#125;<br>      &#125;<br><br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure><p>Jenkinsfileæ–‡ä»¶ä¸­æœ‰ä¸ƒä¸ªç¯å¢ƒå˜é‡å­—æ®µï¼Œå¦‚ä¸‹</p><table><thead><tr><th align="left">å­—æ®µå€¼</th><th align="center">å­—æ®µåç§°</th><th align="right">å­—æ®µæ³¨é‡Š</th><th align="right">ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left">project_path</td><td align="center">é¡¹ç›®å­˜æ”¾çš„ç›®å½•åœ°å€</td><td align="right">jaråœ¨æœåŠ¡å™¨ä¸Šå®é™…å­˜æ”¾çš„åœ°å€</td><td align="right">&#x2F;usr&#x2F;local&#x2F;java&#x2F;demo</td></tr><tr><td align="left">sh_path_command</td><td align="center">éœ€è¦æ‰§è¡Œçš„shå‘½ä»¤</td><td align="right">ä¸€èˆ¬æ˜¯ sh è„šæœ¬æ‰€åœ¨ä½ç½®åŠ æ‰§è¡Œçš„æ“ä½œ</td><td align="right">sh &#x2F;usr&#x2F;local&#x2F;java&#x2F;demo&#x2F;start.sh restart  æ­¤å‘½ä»¤æ˜¯æ‰§è¡Œ&#x2F;usr&#x2F;local&#x2F;java&#x2F;demoç›®å½•ä¸‹start.shè„šæœ¬çš„restartæ“ä½œ</td></tr><tr><td align="left">host:ç›®æ ‡æœåŠ¡å™¨åœ°å€</td><td align="center">æœåŠ¡å™¨IPåœ°å€</td><td align="right">111.111.111.111</td><td align="right"></td></tr><tr><td align="left">port</td><td align="center">SSHç«¯å£å·</td><td align="right">ç«¯å£å·</td><td align="right">22</td></tr><tr><td align="left">user</td><td align="center">SSHç”¨æˆ·å</td><td align="right">ç™»å½•ç”¨æˆ·å</td><td align="right">root</td></tr><tr><td align="left">credentialsId</td><td align="center">SSHç™»å½•å‡­æ®</td><td align="right">sshç™»å½•å‡­è¯</td><td align="right">é€‰æ‹©é¡¹ï¼Œéœ€è¦é…ç½®ç§é’¥å¹¶æ·»åŠ è‡³codingå‡­è¯ç®¡ç†ä¸­</td></tr><tr><td align="left">project_target_path</td><td align="center">jaråŒ…æ‰€åœ¨ç›®å½•</td><td align="right">æ‰§è¡Œæ‰“åŒ…å‘½ä»¤åjaræ‰€åœ¨çš„ç›®å½•</td><td align="right">demo&#x2F;target</td></tr></tbody></table><p>ä»¥ä¸Šç¯å¢ƒå˜é‡éœ€è¦æ·»åŠ è‡³è¯¥æ„å»ºè®¡åˆ’çš„ã€å˜é‡ä¸ç¼“å­˜ã€‘ä¸­ï¼Œå¦‚å›¾:</p><p><img src="/2022/10/17/%E4%BD%BF%E7%94%A8coding%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90SpringBoot%E9%A1%B9%E7%9B%AE/2022-10-17-11-17-02.png"></p><p>æˆ‘ä»¬çš„é¡¹ç›®é‡‡ç”¨Mavenæ„å»ºï¼Œæˆ‘å‹¾é€‰ä¸Šäº†ç¼“å­˜Mavenç›®å½•ï¼Œè¿™æ ·æ¯æ¬¡æ„å»ºå°±ä¸éœ€è¦é‡å¤ä¸‹è½½ä¾èµ–äº†ï¼Œé€Ÿåº¦æ›´å¿«</p><h3 id="å¯åŠ¨è„šæœ¬"><a href="#å¯åŠ¨è„šæœ¬" class="headerlink" title="å¯åŠ¨è„šæœ¬"></a>å¯åŠ¨è„šæœ¬</h3><p>æ­¤è„šæœ¬æ¥è‡ªruoyi-vueé¡¹ç›®,è„šæœ¬å†…å®¹éœ€è¦è°ƒæ•´<code>$AppName</code>å’Œ<code>$APP_HOME</code>å‚æ•°ï¼Œ<code>$JVM_OPTS</code>å‚æ•°å¯é…Œæƒ…è°ƒæ•´</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/sh</span><br><span class="hljs-comment"># ./start.sh start å¯åŠ¨</span><br><span class="hljs-comment"># ./start.sh stop åœæ­¢</span><br><span class="hljs-comment"># ./start.sh restart é‡å¯</span><br><span class="hljs-comment"># ./start.sh status çŠ¶æ€</span><br>AppName=jenkins_demo-0.0.1-SNAPSHOT.jar<br><span class="hljs-comment"># JVMå‚æ•°</span><br>JVM_OPTS=<span class="hljs-string">&quot;-Dname=<span class="hljs-variable">$AppName</span>  -Duser.timezone=Asia/Shanghai -Xms512M -Xmx512M -XX:PermSize=256M -XX:MaxPermSize=512M -XX:+HeapDumpOnOutOfMemoryError -XX:+PrintGCDateStamps  -XX:+PrintGCDetails -XX:NewRatio=1 -XX:SurvivorRatio=30 -XX:+UseParallelGC -XX:+UseParallelOldGC&quot;</span><br><span class="hljs-comment">#Appæ‰€åœ¨ç›®å½•</span><br>APP_HOME=<span class="hljs-string">&quot;/usr/local/java/demo&quot;</span><br>LOG_PATH=<span class="hljs-variable">$APP_HOME</span>/logs/<span class="hljs-variable">$AppName</span>.<span class="hljs-built_in">log</span><br><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> = <span class="hljs-string">&quot;&quot;</span> ];<br><span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\033[0;31m æœªè¾“å…¥æ“ä½œå \033[0m  \033[0;34m &#123;start|stop|restart|status&#125; \033[0m&quot;</span><br>    <span class="hljs-built_in">exit</span> 1<br><span class="hljs-keyword">fi</span><br><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$AppName</span>&quot;</span> = <span class="hljs-string">&quot;&quot;</span> ];<br><span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\033[0;31m æœªè¾“å…¥åº”ç”¨å \033[0m&quot;</span><br>    <span class="hljs-built_in">exit</span> 1<br><span class="hljs-keyword">fi</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">start</span></span>()<br>&#123;<br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;å¼€å§‹æ‰§è¡Œstart&quot;</span><br>   <span class="hljs-built_in">cd</span> <span class="hljs-variable">$APP_HOME</span><br>   <span class="hljs-built_in">nohup</span> java -jar  <span class="hljs-variable">$APP_HOME</span>/<span class="hljs-variable">$AppName</span> &gt; nohup.out &amp; 2&gt;&amp;1 &amp;<br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;ç»“æŸæ‰§è¡Œstart&quot;</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">stop</span></span>()<br>&#123;<br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Stop <span class="hljs-variable">$AppName</span>&quot;</span><br><br>PID=<span class="hljs-string">&quot;&quot;</span><br><span class="hljs-function"><span class="hljs-title">query</span></span>()&#123;<br>PID=`ps -ef |grep java|grep <span class="hljs-variable">$AppName</span>|grep -v grep|awk <span class="hljs-string">&#x27;&#123;print $2&#125;&#x27;</span>`<br>&#125;<br><br>query<br><span class="hljs-keyword">if</span> [ x<span class="hljs-string">&quot;<span class="hljs-variable">$PID</span>&quot;</span> != x<span class="hljs-string">&quot;&quot;</span> ]; <span class="hljs-keyword">then</span><br><span class="hljs-built_in">kill</span> -TERM <span class="hljs-variable">$PID</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$AppName</span> (pid:<span class="hljs-variable">$PID</span>) exiting...&quot;</span><br><span class="hljs-keyword">while</span> [ x<span class="hljs-string">&quot;<span class="hljs-variable">$PID</span>&quot;</span> != x<span class="hljs-string">&quot;&quot;</span> ]<br><span class="hljs-keyword">do</span><br><span class="hljs-built_in">sleep</span> 1<br>query<br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$AppName</span> exited.&quot;</span><br><span class="hljs-keyword">else</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$AppName</span> already stopped.&quot;</span><br><span class="hljs-keyword">fi</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">restart</span></span>()<br>&#123;<br>    stop<br>    <span class="hljs-built_in">sleep</span> 2<br>    start<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">status</span></span>()<br>&#123;<br>    PID=`ps -ef |grep java|grep <span class="hljs-variable">$AppName</span>|grep -v grep|<span class="hljs-built_in">wc</span> -l`<br>    <span class="hljs-keyword">if</span> [ <span class="hljs-variable">$PID</span> != 0 ];<span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$AppName</span> is running...&quot;</span><br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$AppName</span> is not running...&quot;</span><br>    <span class="hljs-keyword">fi</span><br>&#125;<br><br><span class="hljs-keyword">case</span> <span class="hljs-variable">$1</span> <span class="hljs-keyword">in</span><br>    start)<br>    start;;<br>    stop)<br>    stop;;<br>    restart)<br>    restart;;<br>    status)<br>    status;;<br>    *)<br><br><span class="hljs-keyword">esac</span><br></code></pre></td></tr></table></figure><h2 id="ç–‘é—®-x2F-è®¨è®º"><a href="#ç–‘é—®-x2F-è®¨è®º" class="headerlink" title="ç–‘é—®&#x2F;è®¨è®º"></a>ç–‘é—®&#x2F;è®¨è®º</h2><p>å¦‚æœä½¿ç”¨Nginxé…ç½®äº†è´Ÿè½½å‡è¡¡ï¼Œéƒ¨ç½²äº†å¤šä¸ªJarï¼Œè¯¥æŒç»­é›†æˆåº”è¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿè¯„è®ºåŒºæœ‰ç­”æ¡ˆå—ï¼Ÿ</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;å…¬å¸é¡¹ç›®ä½¿ç”¨Codingè¿›è¡Œç®¡ç†ï¼Œæ¯æ¬¡æ‰“åŒ…éƒ¨ç½²éƒ½éœ€è¦ç»å†ä»¥ä¸‹æµç¨‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»£ç æäº¤&lt;/li&gt;
&lt;li&gt;é¡¹ç›®æ‰“åŒ…&lt;/li&gt;
</summary>
      
    
    
    
    <category term="æŒç»­é›†æˆ" scheme="https://www.songhaozhi.com/categories/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
    
    <category term="Coding" scheme="https://www.songhaozhi.com/categories/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/Coding/"/>
    
    
    <category term="Coding" scheme="https://www.songhaozhi.com/tags/Coding/"/>
    
    <category term="æŒç»­é›†æˆ" scheme="https://www.songhaozhi.com/tags/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨acme.shæ¥ç”³è¯·SSLè¯ä¹¦</title>
    <link href="https://www.songhaozhi.com/2022/09/23/%E4%BD%BF%E7%94%A8acme-sh%E6%9D%A5%E7%94%B3%E8%AF%B7SSL%E8%AF%81%E4%B9%A6/"/>
    <id>https://www.songhaozhi.com/2022/09/23/%E4%BD%BF%E7%94%A8acme-sh%E6%9D%A5%E7%94%B3%E8%AF%B7SSL%E8%AF%81%E4%B9%A6/</id>
    <published>2022-09-23T06:12:27.000Z</published>
    <updated>2022-11-14T03:45:42.988Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p><code>acme.sh</code> å®ç°äº† <code>acme</code> åè®®, å¯ä»¥ä» <code>letsencrypt</code> ç”Ÿæˆå…è´¹çš„è¯ä¹¦.</p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E">https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E</a></p><p>æœ¬ç¯‡æ–‡ç« ä»¥Nginxä¸ºä¾‹å­ï¼Œæ¥å®ç°è·å–SSLè¯ä¹¦ï¼Œä»¥åŠé…ç½®Nginx</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>å®‰è£…å¾ˆç®€å•, ä¸€ä¸ªå‘½ä»¤:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">curl https://<span class="hljs-built_in">get</span>.acme.<span class="hljs-keyword">sh</span> | <span class="hljs-keyword">sh</span> -s email=my@example.<span class="hljs-keyword">com</span><br></code></pre></td></tr></table></figure><div class="note note-info">            <p><code>my@example.com</code>æ˜¯ä½ çš„é‚®ç®±åœ°å€</p>          </div><p>åˆ›å»º ä¸€ä¸ª shell çš„ alias, ä¾‹å¦‚ .bashrcï¼Œæ–¹ä¾¿ä½ çš„ä½¿ç”¨: </p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata">alias acme.<span class="hljs-keyword">sh</span>=~/.acme.<span class="hljs-keyword">sh</span>/acme.<span class="hljs-keyword">sh</span><br></code></pre></td></tr></table></figure><p>æ™®é€šç”¨æˆ·å’Œ root ç”¨æˆ·éƒ½å¯ä»¥å®‰è£…ä½¿ç”¨. å®‰è£…è¿‡ç¨‹è¿›è¡Œäº†ä»¥ä¸‹å‡ æ­¥:</p><ol><li>æŠŠ acme.sh å®‰è£…åˆ°ä½ çš„ home ç›®å½•ä¸‹:</li></ol><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">~<span class="hljs-regexp">/.acme.sh/</span><br></code></pre></td></tr></table></figure><ol start="2"><li>è‡ªåŠ¨ä¸ºä½ åˆ›å»º cronjob, æ¯å¤© 0:00 ç‚¹è‡ªåŠ¨æ£€æµ‹æ‰€æœ‰çš„è¯ä¹¦, å¦‚æœå¿«è¿‡æœŸäº†, éœ€è¦æ›´æ–°, åˆ™ä¼šè‡ªåŠ¨æ›´æ–°è¯ä¹¦.</li></ol><p>æ›´é«˜çº§çš„å®‰è£…é€‰é¡¹è¯·å‚è€ƒ: <a href="https://github.com/Neilpang/acme.sh/wiki/How-to-install">https://github.com/Neilpang/acme.sh/wiki/How-to-install</a></p><h1 id="é…ç½®Nginx"><a href="#é…ç½®Nginx" class="headerlink" title="é…ç½®Nginx"></a>é…ç½®Nginx</h1><p>å…ˆæŠŠNginxé…ç½®æ–‡ä»¶å†™å¥½ï¼Œè®©è¿™ä¸ªåŸŸåå¯ä»¥é€šè¿‡httpè®¿é—®</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br><span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;<br>       <span class="hljs-attribute">server_name</span>  ä½ çš„åŸŸå;<br>       <span class="hljs-section">location</span> / &#123;<br>          <span class="hljs-comment">#è½¬å‘çš„ipå’Œç«¯å£ </span><br>          <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:8080;<br>       &#125;<br>       <span class="hljs-attribute">error_page</span>   <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span>  /50x.html;<br>       <span class="hljs-section">location</span> = /50x.html &#123;<br>           <span class="hljs-attribute">root</span>   html;<br>       &#125;<br>   &#125;<br></code></pre></td></tr></table></figure><h1 id="ç”Ÿæˆè¯ä¹¦"><a href="#ç”Ÿæˆè¯ä¹¦" class="headerlink" title="ç”Ÿæˆè¯ä¹¦"></a>ç”Ÿæˆè¯ä¹¦</h1><p>å…³äºç”Ÿæˆè¯ä¹¦ï¼Œå®˜æ–¹çš„ä¾‹å­æœ‰apacheã€nginxã€æ‰‹åŠ¨ dns çš„æ–¹å¼ï¼Œæˆ‘è¿™é‡Œåªæ¼”ç¤ºNginxçš„æ–¹å¼</p><p>å®˜æ–¹æ–‡æ¡£ä¸Šè¿™æ ·å†™çš„</p><blockquote><p><a href="https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E#1-http-%E6%96%B9%E5%BC%8F%E9%9C%80%E8%A6%81%E5%9C%A8%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%94%BE%E7%BD%AE%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6-%E6%9D%A5%E9%AA%8C%E8%AF%81%E4%BD%A0%E7%9A%84%E5%9F%9F%E5%90%8D%E6%89%80%E6%9C%89%E6%9D%83%E5%AE%8C%E6%88%90%E9%AA%8C%E8%AF%81-%E7%84%B6%E5%90%8E%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%94%9F%E6%88%90%E8%AF%81%E4%B9%A6%E4%BA%86">https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E#1-http-%E6%96%B9%E5%BC%8F%E9%9C%80%E8%A6%81%E5%9C%A8%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%94%BE%E7%BD%AE%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6-%E6%9D%A5%E9%AA%8C%E8%AF%81%E4%BD%A0%E7%9A%84%E5%9F%9F%E5%90%8D%E6%89%80%E6%9C%89%E6%9D%83%E5%AE%8C%E6%88%90%E9%AA%8C%E8%AF%81-%E7%84%B6%E5%90%8E%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%94%9F%E6%88%90%E8%AF%81%E4%B9%A6%E4%BA%86</a></p></blockquote><blockquote><p>å¦‚æœä½ ç”¨çš„ nginxæœåŠ¡å™¨, æˆ–è€…åä»£, acme.sh è¿˜å¯ä»¥æ™ºèƒ½çš„ä» nginxçš„é…ç½®ä¸­è‡ªåŠ¨å®ŒæˆéªŒè¯, ä½ ä¸éœ€è¦æŒ‡å®šç½‘ç«™æ ¹ç›®å½•:</p></blockquote><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">acme<span class="hljs-selector-class">.sh</span> <span class="hljs-attr">--issue</span> -d ä½ çš„åŸŸå<span class="hljs-selector-class">.com</span> <span class="hljs-attr">--nginx</span><br></code></pre></td></tr></table></figure><p>ç”Ÿæˆå¥½çš„è¯ä¹¦ä¼šå­˜æ”¾åœ¨<code>~/.acme.sh/example.com</code>ä¸‹</p><h1 id="copy-x2F-å®‰è£…è¯ä¹¦"><a href="#copy-x2F-å®‰è£…è¯ä¹¦" class="headerlink" title="copy&#x2F;å®‰è£…è¯ä¹¦"></a>copy&#x2F;å®‰è£…è¯ä¹¦</h1><p>å‰é¢è¯ä¹¦ç”Ÿæˆä»¥å, æ¥ä¸‹æ¥éœ€è¦æŠŠè¯ä¹¦ copy åˆ°çœŸæ­£éœ€è¦ç”¨å®ƒçš„åœ°æ–¹.</p><p>æ³¨æ„, é»˜è®¤ç”Ÿæˆçš„è¯ä¹¦éƒ½æ”¾åœ¨å®‰è£…ç›®å½•ä¸‹: ~&#x2F;.acme.sh&#x2F;, è¯·ä¸è¦ç›´æ¥ä½¿ç”¨æ­¤ç›®å½•ä¸‹çš„æ–‡ä»¶, ä¾‹å¦‚: ä¸è¦ç›´æ¥è®© nginx&#x2F;apache çš„é…ç½®æ–‡ä»¶ä½¿ç”¨è¿™ä¸‹é¢çš„æ–‡ä»¶. è¿™é‡Œé¢çš„æ–‡ä»¶éƒ½æ˜¯å†…éƒ¨ä½¿ç”¨, è€Œä¸”ç›®å½•ç»“æ„å¯èƒ½ä¼šå˜åŒ–.</p><p>æ­£ç¡®çš„ä½¿ç”¨æ–¹æ³•æ˜¯ä½¿ç”¨ â€“install-cert å‘½ä»¤,å¹¶æŒ‡å®šç›®æ ‡ä½ç½®, ç„¶åè¯ä¹¦æ–‡ä»¶ä¼šè¢«copyåˆ°ç›¸åº”çš„ä½ç½®, ä¾‹å¦‚:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gradle">acme.sh --force --install-cert <br>-d example.com <br>--fullchain-<span class="hljs-keyword">file</span> <span class="hljs-regexp">/etc/</span>nginx<span class="hljs-regexp">/ssl/</span>example.com.crt <br>--key-<span class="hljs-keyword">file</span>  <span class="hljs-regexp">/etc/</span>nginx<span class="hljs-regexp">/ssl/</span>example.com.key <br>--reloadcmd <span class="hljs-string">&quot;service nginx force-reload&quot;</span> &gt; <span class="hljs-regexp">/dev/</span><span class="hljs-keyword">null</span> <br></code></pre></td></tr></table></figure><div class="note note-info">            <p>â€“install-cert: è¿™ä¸ªå‚æ•°ä»£è¡¨cpoy<br>-d: ä½ çš„åŸŸå<br>â€“key-file: copyä½ çš„ç§é’¥æ–‡ä»¶,éœ€è¦å’ŒnginxæŒ‡å®šçš„ä¸€è‡´<br>â€“fullchain-file: copyä½ çš„è¯ä¹¦é“¾æ–‡ä»¶(æ­¤æ–‡ä»¶åŒ…å«è‡ªå·±å’Œä¸­é—´caæœºæ„çš„è¯ä¹¦),éœ€è¦å’ŒnginxæŒ‡å®šçš„ä¸€è‡´<br>â€“reloadcmd: æŒ‡å®šé‡æ–°åŠ è½½è¯ä¹¦çš„å‘½ä»¤</p>          </div><p>(ä¸€ä¸ªå°æé†’, è¿™é‡Œç”¨çš„æ˜¯ service nginx force-reload, ä¸æ˜¯ service nginx reload, æ®æµ‹è¯•, reload å¹¶ä¸ä¼šé‡æ–°åŠ è½½è¯ä¹¦, æ‰€ä»¥ç”¨çš„ force-reload)</p><p>Nginx çš„é…ç½® ssl_certificate ä½¿ç”¨ &#x2F;etc&#x2F;nginx&#x2F;ssl&#x2F;fullchain.cer ï¼Œè€Œé &#x2F;etc&#x2F;nginx&#x2F;ssl&#x2F;<domain>.cer ï¼Œå¦åˆ™ SSL Labs çš„æµ‹è¯•ä¼šæŠ¥ Chain issues Incomplete é”™è¯¯ã€‚</domain></p><p>â€“install-certå‘½ä»¤å¯ä»¥æºå¸¦å¾ˆå¤šå‚æ•°, æ¥æŒ‡å®šç›®æ ‡æ–‡ä»¶. å¹¶ä¸”å¯ä»¥æŒ‡å®š reloadcmd, å½“è¯ä¹¦æ›´æ–°ä»¥å, reloadcmdä¼šè¢«è‡ªåŠ¨è°ƒç”¨,è®©æœåŠ¡å™¨ç”Ÿæ•ˆ.</p><p>è¯¦ç»†å‚æ•°è¯·å‚è€ƒ: <a href="https://github.com/Neilpang/acme.sh#3-install-the-issued-cert-to-apachenginx-etc">https://github.com/Neilpang/acme.sh#3-install-the-issued-cert-to-apachenginx-etc</a></p><p>å€¼å¾—æ³¨æ„çš„æ˜¯, è¿™é‡ŒæŒ‡å®šçš„æ‰€æœ‰å‚æ•°éƒ½ä¼šè¢«è‡ªåŠ¨è®°å½•ä¸‹æ¥, å¹¶åœ¨å°†æ¥è¯ä¹¦è‡ªåŠ¨æ›´æ–°ä»¥å, è¢«å†æ¬¡è‡ªåŠ¨è°ƒç”¨.</p><h1 id="ä¿®æ”¹Nginxé…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹Nginxé…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹Nginxé…ç½®æ–‡ä»¶"></a>ä¿®æ”¹Nginxé…ç½®æ–‡ä»¶</h1><p>æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ä»¥åï¼Œä¼šå‘ç°åœ¨<code>/etc/nginx/ssl</code>ç›®å½•ä¸‹ä¼šå¤šå‡ºä¸¤ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸¤ä¸ªæ–‡ä»¶åœ¨Nginxé…ç½®æ–‡ä»¶ä¸­é…ç½®å¥½</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br><span class="hljs-attribute">listen</span> <span class="hljs-number">443</span> ssl;<br>        <span class="hljs-attribute">server_name</span>  example.com;<br>        <span class="hljs-attribute">ssl</span> <span class="hljs-literal">on</span>;<br>        <span class="hljs-attribute">ssl_certificate</span>      /etc/nginx/ssl/example.com.crt;<br>        <span class="hljs-attribute">ssl_certificate_key</span>  /etc/nginx/ssl/example.com.key; <br>        <span class="hljs-attribute">ssl_session_timeout</span> <span class="hljs-number">5m</span>;<br>        <span class="hljs-attribute">ssl_session_cache</span> shared:SSL:<span class="hljs-number">50m</span>;<br>        <span class="hljs-attribute">ssl_protocols</span> SSLv3 SSLv2 TLSv1 TLSv1.<span class="hljs-number">1</span> TLSv1.<span class="hljs-number">2</span>; <span class="hljs-comment">#æŒ‰ç…§è¿™ä¸ªåè®®é…ç½®</span><br>        <span class="hljs-attribute">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;<br>        <span class="hljs-attribute">ssl_prefer_server_ciphers</span> <span class="hljs-literal">on</span>;<br>        <span class="hljs-section">location</span> / &#123;<br>           <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:8080;<br>           <span class="hljs-attribute">proxy_set_header</span> Host <span class="hljs-variable">$host</span>;<br>           <span class="hljs-attribute">proxy_set_header</span> X-Real-IP <span class="hljs-variable">$remote_addr</span>;<br>           <span class="hljs-attribute">proxy_set_header</span> REMOTE-HOST <span class="hljs-variable">$remote_addr</span>;<br>           <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;<br>        &#125;<br>        <span class="hljs-attribute">error_page</span>   <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span>  /50x.html;<br>        <span class="hljs-section">location</span> = /50x.html &#123;<br>            <span class="hljs-attribute">root</span>   html;<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><p>Nginxé…ç½®å¥½åé‡å¯Nginxï¼Œè®¿é—®ä½ çš„åŸŸåã€‚</p><h1 id="æ›´æ–°è¯ä¹¦"><a href="#æ›´æ–°è¯ä¹¦" class="headerlink" title="æ›´æ–°è¯ä¹¦"></a>æ›´æ–°è¯ä¹¦</h1><p>ç›®å‰è¯ä¹¦åœ¨ 60 å¤©ä»¥åä¼šè‡ªåŠ¨æ›´æ–°, ä½ æ— éœ€ä»»ä½•æ“ä½œ. ä»Šåæœ‰å¯èƒ½ä¼šç¼©çŸ­è¿™ä¸ªæ—¶é—´, ä¸è¿‡éƒ½æ˜¯è‡ªåŠ¨çš„, ä½ ä¸ç”¨å…³å¿ƒ.</p><p>è¯·ç¡®ä¿ cronjob æ­£ç¡®å®‰è£…, çœ‹èµ·æ¥æ˜¯ç±»ä¼¼è¿™æ ·çš„:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gradle">crontab  -l<br><br><span class="hljs-number">56</span> * * * * <span class="hljs-string">&quot;/root/.acme.sh&quot;</span><span class="hljs-regexp">/acme.sh --cron --home &quot;/</span>root<span class="hljs-regexp">/.acme.sh&quot; &gt; /</span>dev/<span class="hljs-keyword">null</span><br></code></pre></td></tr></table></figure><h1 id="å…¶ä»–å¸¸ç”¨å‘½ä»¤"><a href="#å…¶ä»–å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å…¶ä»–å¸¸ç”¨å‘½ä»¤"></a>å…¶ä»–å¸¸ç”¨å‘½ä»¤</h1><p><code>acme.sh --info -d example.com </code>ï¼šæŸ¥çœ‹å·²å®‰è£…è¯ä¹¦ä¿¡æ¯</p><p><code>acme.sh --list</code>: åˆ—å‡ºæ‰€æœ‰è¯ä¹¦</p><p><code>acme.sh --renew -d soulchild.site -d *.soulchild.site --force</code>: æ‰‹åŠ¨å¼ºåˆ¶æ›´æ–°è¯ä¹¦</p><p><code>acme.sh --renew-all</code>: æ‰‹åŠ¨æ›´æ–°æ‰€æœ‰è¯ä¹¦</p><p><code>acme.sh --revoke</code>: æ’¤é”€è¯ä¹¦</p><p><code>acme.sh --remove -d soulchild.site</code>: åˆ é™¤è¯ä¹¦</p><p><code>acme.sh --cron</code>: é€šè¿‡cronjobæ›´æ–°æ‰€æœ‰è¯ä¹¦ã€‚</p><p><code>acme.sh --upgrade</code>: å‡çº§acme.sh</p><p><code>acme.sh --uninstall</code>: å¸è½½acme.sh</p><h1 id="æ›´æ–°acme-sh"><a href="#æ›´æ–°acme-sh" class="headerlink" title="æ›´æ–°acme.sh"></a>æ›´æ–°acme.sh</h1><p><code>acme.sh --upgrade</code>ï¼šå‡çº§åˆ°æœ€æ–°ç‰ˆ</p><p><code>acme.sh --upgrade --auto-upgrade</code>ï¼šå¼€å¯è‡ªåŠ¨æ›´æ–°</p><p><code>acme.sh --upgrade --auto-upgrade  0</code>ï¼šå…³é—­è‡ªåŠ¨æ›´æ–°</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><blockquote><p><a href="https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E">https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E</a></p></blockquote><blockquote><p><a href="https://github.com/oneinstack/oneinstack/blob/master/vhost.sh#L265">https://github.com/oneinstack/oneinstack/blob/master/vhost.sh#L265</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h1&gt;&lt;p&gt;&lt;code&gt;acme.sh&lt;/code&gt; å®ç°äº† &lt;code&gt;acme&lt;/code&gt; åè®®, å¯ä»¥ä» &lt;code&gt;letsencrypt&lt;/</summary>
      
    
    
    
    <category term="Nginx" scheme="https://www.songhaozhi.com/categories/Nginx/"/>
    
    <category term="Centos" scheme="https://www.songhaozhi.com/categories/Centos/"/>
    
    <category term="SSL" scheme="https://www.songhaozhi.com/categories/SSL/"/>
    
    
    <category term="Nginx" scheme="https://www.songhaozhi.com/tags/Nginx/"/>
    
    <category term="Centos" scheme="https://www.songhaozhi.com/tags/Centos/"/>
    
    <category term="SSL" scheme="https://www.songhaozhi.com/tags/SSL/"/>
    
  </entry>
  
  <entry>
    <title>CentOSå®‰è£…Nginx</title>
    <link href="https://www.songhaozhi.com/2022/09/23/CentOS%E5%AE%89%E8%A3%85Nginx/"/>
    <id>https://www.songhaozhi.com/2022/09/23/CentOS%E5%AE%89%E8%A3%85Nginx/</id>
    <published>2022-09-23T05:51:29.000Z</published>
    <updated>2022-11-14T03:45:42.956Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>Nginx (engine x) æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„HTTPå’Œåå‘ä»£ç†webæœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†IMAP&#x2F;POP3&#x2F;SMTPæœåŠ¡ã€‚Nginxæ˜¯ç”±ä¼Šæˆˆå°”Â·èµ›ç´¢è€¶å¤«ä¸ºä¿„ç½—æ–¯è®¿é—®é‡ç¬¬äºŒçš„Rambler.ruç«™ç‚¹ï¼ˆä¿„æ–‡ï¼šĞ Ğ°Ğ¼Ğ±Ğ»ĞµÑ€ï¼‰å¼€å‘çš„ã€‚</p><p>å…¶å°†æºä»£ç ä»¥ç±»BSDè®¸å¯è¯çš„å½¢å¼å‘å¸ƒï¼Œå› å®ƒçš„ç¨³å®šæ€§ã€ä¸°å¯Œçš„åŠŸèƒ½é›†ã€ç®€å•çš„é…ç½®æ–‡ä»¶å’Œä½ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—è€Œé—»åã€‚</p><p>Nginxæ˜¯ä¸€æ¬¾è½»é‡çº§çš„Web æœåŠ¡å™¨&#x2F;åå‘ä»£ç†æœåŠ¡å™¨åŠç”µå­é‚®ä»¶ï¼ˆIMAP&#x2F;POP3ï¼‰ä»£ç†æœåŠ¡å™¨ï¼Œåœ¨BSD-like åè®®ä¸‹å‘è¡Œã€‚å…¶ç‰¹ç‚¹æ˜¯å æœ‰å†…å­˜å°‘ï¼Œå¹¶å‘èƒ½åŠ›å¼ºï¼Œäº‹å®ä¸Šnginxçš„å¹¶å‘èƒ½åŠ›åœ¨åŒç±»å‹çš„ç½‘é¡µæœåŠ¡å™¨ä¸­è¡¨ç°è¾ƒå¥½ã€‚</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><h2 id="æ·»åŠ Nginxåˆ°YUMæº"><a href="#æ·»åŠ Nginxåˆ°YUMæº" class="headerlink" title="æ·»åŠ Nginxåˆ°YUMæº"></a>æ·»åŠ Nginxåˆ°YUMæº</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm<br></code></pre></td></tr></table></figure><h2 id="å®‰è£…Nginx"><a href="#å®‰è£…Nginx" class="headerlink" title="å®‰è£…Nginx"></a>å®‰è£…Nginx</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum -y <span class="hljs-keyword">install</span> nginx<br></code></pre></td></tr></table></figure><h2 id="å¯åŠ¨Nginx"><a href="#å¯åŠ¨Nginx" class="headerlink" title="å¯åŠ¨Nginx"></a>å¯åŠ¨Nginx</h2><p>åˆšå®‰è£…çš„Nginxä¸ä¼šè‡ªåŠ¨å¯åŠ¨</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">systemctl <span class="hljs-literal">start</span> nginx.service<br></code></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹NginxçŠ¶æ€"><a href="#æŸ¥çœ‹NginxçŠ¶æ€" class="headerlink" title="æŸ¥çœ‹NginxçŠ¶æ€"></a>æŸ¥çœ‹NginxçŠ¶æ€</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><br>systemctl <span class="hljs-built_in">enable</span> nginx.service<br></code></pre></td></tr></table></figure><h2 id="è®¾ç½®å¼€æœºè‡ªå¯"><a href="#è®¾ç½®å¼€æœºè‡ªå¯" class="headerlink" title="è®¾ç½®å¼€æœºè‡ªå¯"></a>è®¾ç½®å¼€æœºè‡ªå¯</h2><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs fortran">systemctl <span class="hljs-keyword">status</span> nginx.service<br></code></pre></td></tr></table></figure><h2 id="åœæ­¢Nginx"><a href="#åœæ­¢Nginx" class="headerlink" title="åœæ­¢Nginx"></a>åœæ­¢Nginx</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">systemctl stop nginx.service<br></code></pre></td></tr></table></figure><h2 id="é‡å¯Nginx"><a href="#é‡å¯Nginx" class="headerlink" title="é‡å¯Nginx"></a>é‡å¯Nginx</h2><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">systemctl <span class="hljs-built_in">restart</span> nginx.service<br></code></pre></td></tr></table></figure><h2 id="é‡æ–°è¯»å–nginxé…ç½®"><a href="#é‡æ–°è¯»å–nginxé…ç½®" class="headerlink" title="é‡æ–°è¯»å–nginxé…ç½®"></a>é‡æ–°è¯»å–nginxé…ç½®</h2><p>è¿™ä¸ªæœ€å¸¸ç”¨, ä¸ç”¨åœæ­¢nginxæœåŠ¡å°±èƒ½ä½¿ä¿®æ”¹çš„é…ç½®ç”Ÿæ•ˆ</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">systemctl <span class="hljs-keyword">reload</span> nginx.service<br></code></pre></td></tr></table></figure><h2 id="ç½‘ç«™æ–‡ä»¶å­˜æ”¾é»˜è®¤ç›®å½•"><a href="#ç½‘ç«™æ–‡ä»¶å­˜æ”¾é»˜è®¤ç›®å½•" class="headerlink" title="ç½‘ç«™æ–‡ä»¶å­˜æ”¾é»˜è®¤ç›®å½•"></a>ç½‘ç«™æ–‡ä»¶å­˜æ”¾é»˜è®¤ç›®å½•</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/nginx/</span>html<br></code></pre></td></tr></table></figure><h2 id="Nginxé…ç½®æ–‡ä»¶è·¯å¾„"><a href="#Nginxé…ç½®æ–‡ä»¶è·¯å¾„" class="headerlink" title="Nginxé…ç½®æ–‡ä»¶è·¯å¾„"></a>Nginxé…ç½®æ–‡ä»¶è·¯å¾„</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/</span>nginx/nginx.conf<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h1&gt;&lt;p&gt;Nginx (engine x) æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„HTTPå’Œåå‘ä»£ç†webæœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†IMAP&amp;#x2F;POP3&amp;#x2F;SMTP</summary>
      
    
    
    
    <category term="Nginx" scheme="https://www.songhaozhi.com/categories/Nginx/"/>
    
    <category term="Centos" scheme="https://www.songhaozhi.com/categories/Centos/"/>
    
    
    <category term="Nginx" scheme="https://www.songhaozhi.com/tags/Nginx/"/>
    
    <category term="Centos" scheme="https://www.songhaozhi.com/tags/Centos/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Windowså†…ç½®è™šæ‹ŸæœºHyper-vå®‰è£…CentOS</title>
    <link href="https://www.songhaozhi.com/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/"/>
    <id>https://www.songhaozhi.com/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/</id>
    <published>2022-09-08T07:02:04.000Z</published>
    <updated>2022-11-14T03:45:42.972Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸‹è½½Centos"><a href="#ä¸‹è½½Centos" class="headerlink" title="ä¸‹è½½Centos"></a>ä¸‹è½½Centos</h2><p><a href="http://mirrors.aliyun.com/centos/7/isos/x86_64/">http://mirrors.aliyun.com/centos/7/isos/x86_64/</a></p><p><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/mirrors.png"></p><h2 id="å¼€å¯Hyper-V"><a href="#å¼€å¯Hyper-V" class="headerlink" title="å¼€å¯Hyper-V"></a>å¼€å¯Hyper-V</h2><p>åœ¨Windowsä¸­æœç´¢<code>å¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½</code>å¹¶æ‰“å¼€</p><p><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/search.png"></p><p>å‹¾é€‰<code>Hyper-V</code></p><p><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/open.png"></p><p>åœ¨åº”ç”¨ç¨‹åºä¸­æ‰¾åˆ°<code>hyper-vç®¡ç†å™¨</code></p><p><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/hyper.png"></p><h2 id="è™šæ‹Ÿäº¤æ¢æœº"><a href="#è™šæ‹Ÿäº¤æ¢æœº" class="headerlink" title="è™šæ‹Ÿäº¤æ¢æœº"></a>è™šæ‹Ÿäº¤æ¢æœº</h2><p>ç½‘ä¸Šå…¶ä»–æ–‡ç« åœ¨æ–°å»ºè™šæ‹Ÿæœºä¹‹å‰ä¼šå…ˆåˆ›å»ºè™šæ‹Ÿäº¤æ¢æœºï¼Œä½†æ˜¯æˆ‘æ“ä½œçš„æ—¶å€™ï¼Œåˆ›å»ºå®Œè™šæ‹Ÿäº¤æ¢æœºä»¥åï¼Œæœ¬æœºä¼šå‡ºç°æ— ç½‘ç»œçš„æƒ…å†µ</p><p><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/tips.png"></p><p>æ‰€ä»¥æˆ‘å°±ä¸åˆ›å»ºè™šæ‹Ÿäº¤æ¢æœºäº†</p><h2 id="æ–°å»ºè™šæ‹Ÿæœº"><a href="#æ–°å»ºè™šæ‹Ÿæœº" class="headerlink" title="æ–°å»ºè™šæ‹Ÿæœº"></a>æ–°å»ºè™šæ‹Ÿæœº</h2><p><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/create.png"></p><p>ç›´æ¥ç‚¹å‡»ä¸‹ä¸€æ­¥<br><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-36-13.png"></p><p>è®¾ç½®è™šæ‹Ÿæœºåç§°ä»¥åŠå­˜æ”¾ä½ç½®<br><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-36-54.png"></p><p>é€‰æ‹©ç¬¬ä¸€ä»£<br><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-37-45.png"></p><p>åˆ†é…å†…å­˜å¤§å°ï¼ŒæŒ‰ä½ çš„éœ€æ±‚è¿›è¡Œåˆ†é…<br><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-38-08.png"></p><p>ç½‘ç»œè¿æ¥å¦‚æœæ˜¯æ–°å»ºäº†è™šæ‹Ÿäº¤æ¢æœºå°±é€‰æ‹©æ–°å»ºçš„ï¼Œæˆ‘è¿™é‡Œé‡‡ç”¨é»˜è®¤çš„<br><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-38-34.png"></p><p>åˆ›å»ºè™šæ‹Ÿç¡¬ç›˜ï¼Œå¤§å°æŒ‰ä½ éœ€æ±‚è®¾ç½®<br><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-39-24.png"></p><p>é€‰æ‹©ä½ ä¸‹è½½çš„CentOS<br><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-40-59.png"></p><p>ç‚¹å‡»å®Œæˆ<br><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/image.png"></p><h2 id="å¯åŠ¨ç³»ç»Ÿ"><a href="#å¯åŠ¨ç³»ç»Ÿ" class="headerlink" title="å¯åŠ¨ç³»ç»Ÿ"></a>å¯åŠ¨ç³»ç»Ÿ</h2><p>è¿æ¥è™šæ‹Ÿæœº<br><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-42-41.png"></p><p>ç›´æ¥å›è½¦<br><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-43-07.png"></p><p>é€‰æ‹©ä¸­æ–‡ç®€ä½“<br><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-44-45.png"></p><p><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-47-40.png"><br><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-48-09.png"><br><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-48-54.png"></p><p><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-49-22.png"></p><p>ç‚¹å‡»å¼€å§‹å®‰è£…</p><p>è®¾ç½®rootç”¨æˆ·å¯†ç <br><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-50-18.png"><br><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-50-54.png"></p><p>ç­‰å¾…å®‰è£…å®Œæˆ</p><p><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-53-30.png"></p><p>é‡å¯ä»¥åï¼Œè¾“å…¥è´¦å·å¯†ç </p><p><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-54-52.png"></p><h2 id="æµ‹è¯•ç½‘ç»œ"><a href="#æµ‹è¯•ç½‘ç»œ" class="headerlink" title="æµ‹è¯•ç½‘ç»œ"></a>æµ‹è¯•ç½‘ç»œ</h2><p><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-57-54.png"></p><p><img src="/2022/09/08/%E4%BD%BF%E7%94%A8Windows%E5%86%85%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BAHyper-v%E5%AE%89%E8%A3%85CentOS/2022-09-08-15-58-25.png"></p><h2 id="å…¶ä»–é—®é¢˜"><a href="#å…¶ä»–é—®é¢˜" class="headerlink" title="å…¶ä»–é—®é¢˜"></a>å…¶ä»–é—®é¢˜</h2><h3 id="Hyper-Vï¼šæ— æ³•æ‰“å¼€è™šæ‹ŸæœºXXXï¼Œå› ä¸ºè™šæ‹Ÿæœºç›‘æ§ç¨‹åºæœªè¿è¡Œ"><a href="#Hyper-Vï¼šæ— æ³•æ‰“å¼€è™šæ‹ŸæœºXXXï¼Œå› ä¸ºè™šæ‹Ÿæœºç›‘æ§ç¨‹åºæœªè¿è¡Œ" class="headerlink" title="Hyper-Vï¼šæ— æ³•æ‰“å¼€è™šæ‹ŸæœºXXXï¼Œå› ä¸ºè™šæ‹Ÿæœºç›‘æ§ç¨‹åºæœªè¿è¡Œ"></a>Hyper-Vï¼šæ— æ³•æ‰“å¼€è™šæ‹ŸæœºXXXï¼Œå› ä¸ºè™šæ‹Ÿæœºç›‘æ§ç¨‹åºæœªè¿è¡Œ</h3><p><a href="https://zhuanlan.zhihu.com/p/20408480">https://zhuanlan.zhihu.com/p/20408480</a></p><p><a href="https://www.jianshu.com/p/624093c28051">https://www.jianshu.com/p/624093c28051</a></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><blockquote><p><a href="https://blog.csdn.net/qq_36077437/article/details/123980445">https://blog.csdn.net/qq_36077437/article/details/123980445</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ä¸‹è½½Centos&quot;&gt;&lt;a href=&quot;#ä¸‹è½½Centos&quot; class=&quot;headerlink&quot; title=&quot;ä¸‹è½½Centos&quot;&gt;&lt;/a&gt;ä¸‹è½½Centos&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://mirrors.aliyun.com/centos/7/is</summary>
      
    
    
    
    <category term="è™šæ‹Ÿæœº" scheme="https://www.songhaozhi.com/categories/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
    
    <category term="è™šæ‹Ÿæœº" scheme="https://www.songhaozhi.com/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>ruoyi-vueé¡¹ç›®é›†æˆflywayå®ç°è‡ªåŠ¨åˆ›å»ºè¡¨</title>
    <link href="https://www.songhaozhi.com/2022/09/08/ruoyi-vue%E9%A1%B9%E7%9B%AE%E9%9B%86%E6%88%90flyway%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA%E8%A1%A8/"/>
    <id>https://www.songhaozhi.com/2022/09/08/ruoyi-vue%E9%A1%B9%E7%9B%AE%E9%9B%86%E6%88%90flyway%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA%E8%A1%A8/</id>
    <published>2022-09-08T05:39:19.000Z</published>
    <updated>2022-11-14T03:45:42.972Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ·»åŠ flywayä¾èµ–"><a href="#æ·»åŠ flywayä¾èµ–" class="headerlink" title="æ·»åŠ flywayä¾èµ–"></a>æ·»åŠ flywayä¾èµ–</h2><p>åœ¨æ ¹ç›®å½•ä¸‹<code>pom.xml</code>æ·»åŠ flywayä¾èµ–<code>RuoYi-Vue\pom.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.flywaydb<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>flyway-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>7.15.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨<code>ruoyi-framework\pom.xml</code>ä¸‹å¼•å…¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.flywaydb<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>flyway-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="yamlé…ç½®"><a href="#yamlé…ç½®" class="headerlink" title="yamlé…ç½®"></a>yamlé…ç½®</h2><p>åœ¨<code>RuoYi-Vue\ruoyi-admin\src\main\resources\application.yml</code>ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># é…ç½®flywayæ•°æ®ç‰ˆæœ¬ç®¡ç†</span><br>  <span class="hljs-attr">flyway:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">baseline-on-migrate:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">clean-on-validation-error:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-attr">sql-migration-prefix:</span> <span class="hljs-string">V</span><br>    <span class="hljs-attr">sql-migration-suffixes:</span> <span class="hljs-string">.sql</span><br>    <span class="hljs-attr">locations:</span> <span class="hljs-string">classpath:db/migration</span><br></code></pre></td></tr></table></figure><div class="note note-info">            <p>flyway.baseline-descriptionå¯¹æ‰§è¡Œè¿ç§»æ—¶åŸºå‡†ç‰ˆæœ¬çš„æè¿°.<br>flyway.baseline-on-migrateå½“è¿ç§»æ—¶å‘ç°ç›®æ ‡schemaéç©ºï¼Œè€Œä¸”å¸¦æœ‰æ²¡æœ‰å…ƒæ•°æ®çš„è¡¨æ—¶ï¼Œæ˜¯å¦è‡ªåŠ¨æ‰§è¡ŒåŸºå‡†è¿ç§»ï¼Œé»˜è®¤false.<br>flyway.baseline-versionå¼€å§‹æ‰§è¡ŒåŸºå‡†è¿ç§»æ—¶å¯¹ç°æœ‰çš„schemaçš„ç‰ˆæœ¬æ‰“æ ‡ç­¾ï¼Œé»˜è®¤å€¼ä¸º1.<br>flyway.check-locationæ£€æŸ¥è¿ç§»è„šæœ¬çš„ä½ç½®æ˜¯å¦å­˜åœ¨ï¼Œé»˜è®¤false.<br>flyway.clean-on-validation-errorå½“å‘ç°æ ¡éªŒé”™è¯¯æ—¶æ˜¯å¦è‡ªåŠ¨è°ƒç”¨cleanï¼Œé»˜è®¤false.<br>flyway.enabledæ˜¯å¦å¼€å¯flywaryï¼Œé»˜è®¤true.<br>flyway.encodingè®¾ç½®è¿ç§»æ—¶çš„ç¼–ç ï¼Œé»˜è®¤UTF-8.<br>flyway.ignore-failed-future-migrationå½“è¯»å–å…ƒæ•°æ®è¡¨æ—¶æ˜¯å¦å¿½ç•¥é”™è¯¯çš„è¿ç§»ï¼Œé»˜è®¤false.<br>flyway.init-sqlså½“åˆå§‹åŒ–å¥½è¿æ¥æ—¶è¦æ‰§è¡Œçš„SQL.<br>flyway.locationsè¿ç§»è„šæœ¬çš„ä½ç½®ï¼Œé»˜è®¤db&#x2F;migration.<br>flyway.out-of-orderæ˜¯å¦å…è®¸æ— åºçš„è¿ç§»ï¼Œé»˜è®¤false.<br>flyway.passwordç›®æ ‡æ•°æ®åº“çš„å¯†ç .<br>flyway.placeholder-prefixè®¾ç½®æ¯ä¸ªplaceholderçš„å‰ç¼€ï¼Œé»˜è®¤${.<br>flyway.placeholder-replacementplaceholdersæ˜¯å¦è¦è¢«æ›¿æ¢ï¼Œé»˜è®¤true.<br>flyway.placeholder-suffixè®¾ç½®æ¯ä¸ªplaceholderçš„åç¼€ï¼Œé»˜è®¤}.<br>flyway.placeholders.[placeholder name]è®¾ç½®placeholderçš„value<br>flyway.schemasè®¾å®šéœ€è¦flywaryè¿ç§»çš„schemaï¼Œå¤§å°å†™æ•æ„Ÿï¼Œé»˜è®¤ä¸ºè¿æ¥é»˜è®¤çš„schema.<br>flyway.sql-migration-prefixè¿ç§»æ–‡ä»¶çš„å‰ç¼€ï¼Œé»˜è®¤ä¸ºV.<br>flyway.sql-migration-separatorè¿ç§»è„šæœ¬çš„æ–‡ä»¶ååˆ†éš”ç¬¦ï¼Œé»˜è®¤__<br>flyway.sql-migration-suffixè¿ç§»è„šæœ¬çš„åç¼€ï¼Œé»˜è®¤ä¸º.sql<br>flyway.tableflywayä½¿ç”¨çš„å…ƒæ•°æ®è¡¨åï¼Œé»˜è®¤ä¸ºschema_version<br>flyway.targetè¿ç§»æ—¶ä½¿ç”¨çš„ç›®æ ‡ç‰ˆæœ¬ï¼Œé»˜è®¤ä¸ºlatest version<br>flyway.urlè¿ç§»æ—¶ä½¿ç”¨çš„JDBC URLï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šçš„è¯ï¼Œå°†ä½¿ç”¨é…ç½®çš„ä¸»æ•°æ®æº<br>flyway.userè¿ç§»æ•°æ®åº“çš„ç”¨æˆ·å<br>flyway.validate-on-migrateè¿ç§»æ—¶æ˜¯å¦æ ¡éªŒï¼Œé»˜è®¤ä¸ºtrue.</p>          </div><h2 id="åˆ›å»ºç›®å½•"><a href="#åˆ›å»ºç›®å½•" class="headerlink" title="åˆ›å»ºç›®å½•"></a>åˆ›å»ºç›®å½•</h2><p>åœ¨<code>RuoYi-Vue\ruoyi-system\src\main\resources</code>ç›®å½•ä¸‹åˆ›å»º<code>db/migration</code>ç›®å½•ï¼ŒæŠŠè‹¥ä¾è‹¥ä¾æä¾›çš„è¡¨ç»“æ„sqlæ–‡ä»¶å¤åˆ¶åˆ°è¯¥æ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”é‡å‘½åã€‚</p><p>æ–‡ä»¶å‘½åè§„åˆ™ï¼š</p><ul><li><p>ä»…éœ€è¦è¢«æ‰§è¡Œä¸€æ¬¡çš„SQLå‘½åä»¥å¤§å†™çš„â€Vâ€å¼€å¤´ï¼ŒV+ç‰ˆæœ¬å·(ç‰ˆæœ¬å·çš„æ•°å­—é—´ä»¥â€.â€œæˆ–â€_â€œåˆ†éš”å¼€)+åŒä¸‹åˆ’çº¿(ç”¨æ¥åˆ†éš”ç‰ˆæœ¬å·å’Œæè¿°)+æ–‡ä»¶æè¿°+åç¼€åã€‚ä¾‹å¦‚ï¼š<code>V20201100__create_user.sql</code>ã€<code>V2.1.5__create_user_ddl.sql</code>ã€<code>V4.1_2__add_user_dml.sql</code>ã€‚</p></li><li><p>å¯é‡å¤è¿è¡Œçš„SQLï¼Œåˆ™ä»¥å¤§å†™çš„â€œRâ€å¼€å¤´ï¼Œåé¢å†ä»¥ä¸¤ä¸ªä¸‹åˆ’çº¿åˆ†å‰²ï¼Œå…¶åè·Ÿæ–‡ä»¶åç§°ï¼Œæœ€åä»¥.sqlç»“å°¾ã€‚ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰æ¯”å¦‚ï¼š<code>R__truncate_user_dml.sql</code>ã€‚</p></li></ul><p> <img src="/2022/09/08/ruoyi-vue%E9%A1%B9%E7%9B%AE%E9%9B%86%E6%88%90flyway%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA%E8%A1%A8/flyway_create_sql.png"></p><h2 id="è‹¥ä¾é¡¹ç›®ä»£ç ä¿®æ”¹"><a href="#è‹¥ä¾é¡¹ç›®ä»£ç ä¿®æ”¹" class="headerlink" title="è‹¥ä¾é¡¹ç›®ä»£ç ä¿®æ”¹"></a>è‹¥ä¾é¡¹ç›®ä»£ç ä¿®æ”¹</h2><p>å…¨å±€æœç´¢ä¸€ä¸‹<code>@PostConstruct</code>,å°†ä»£ç ä¸­<code>@PostConstruct</code>æ³¨é‡Šæ‰ï¼Œæ€»å…±æœ‰ä¸‰ä¸ªæ–‡ä»¶éœ€è¦ä¿®æ”¹<code>SysJobServiceImpl</code>,<code>SysDictTypeServiceImpl</code>,<code>SysConfigServiceImpl</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * é¡¹ç›®å¯åŠ¨æ—¶ï¼Œåˆå§‹åŒ–å®šæ—¶å™¨ ä¸»è¦æ˜¯é˜²æ­¢æ‰‹åŠ¨ä¿®æ”¹æ•°æ®åº“å¯¼è‡´æœªåŒæ­¥åˆ°å®šæ—¶ä»»åŠ¡å¤„ç†ï¼ˆæ³¨ï¼šä¸èƒ½æ‰‹åŠ¨ä¿®æ”¹æ•°æ®åº“IDå’Œä»»åŠ¡ç»„åï¼Œå¦åˆ™ä¼šå¯¼è‡´è„æ•°æ®ï¼‰</span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">//@PostConstruct</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SchedulerException, TaskException<br>&#123;<br>    scheduler.clear();<br>    List&lt;SysJob&gt; jobList = jobMapper.selectJobAll();<br>    <span class="hljs-keyword">for</span> (SysJob job : jobList)<br>    &#123;<br>        ScheduleUtils.createScheduleJob(scheduler, job);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * é¡¹ç›®å¯åŠ¨æ—¶ï¼Œåˆå§‹åŒ–å­—å…¸åˆ°ç¼“å­˜</span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">//@PostConstruct</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span><br>&#123;<br>    loadingDictCache();<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * é¡¹ç›®å¯åŠ¨æ—¶ï¼Œåˆå§‹åŒ–å‚æ•°åˆ°ç¼“å­˜</span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">//@PostConstruct</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span><br>&#123;<br>    loadingConfigCache();<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨é‡Šæ‰ä»¥åï¼Œæˆ‘ä»¬æŠŠå¯åŠ¨æ—¶åˆå§‹åŒ–çš„æ“ä½œç§»åŠ¨åˆ°<code>RuoYiApplication.java</code>ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ruoyi;<br><br><span class="hljs-keyword">import</span> com.ruoyi.quartz.service.impl.SysJobServiceImpl;<br><span class="hljs-keyword">import</span> com.ruoyi.system.service.impl.SysConfigServiceImpl;<br><span class="hljs-keyword">import</span> com.ruoyi.system.service.impl.SysDictTypeServiceImpl;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.boot.CommandLineRunner;<br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¯åŠ¨ç¨‹åº</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> ruoyi</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SpringBootApplication(exclude = &#123; DataSourceAutoConfiguration.class &#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RuoYiApplication</span><br>        <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CommandLineRunner</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> SysConfigServiceImpl configService;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> SysJobServiceImpl jobService;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> SysDictTypeServiceImpl dictTypeService;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span><br>    &#123;<br>        <span class="hljs-comment">// System.setProperty(&quot;spring.devtools.restart.enabled&quot;, &quot;false&quot;);</span><br>        SpringApplication.run(RuoYiApplication.class, args);<br>        System.out.println(<span class="hljs-string">&quot;(â™¥â— â€¿â— )ï¾‰ï¾  è‹¥ä¾å¯åŠ¨æˆåŠŸ   áƒš(Â´Ú¡`áƒš)ï¾  \n&quot;</span> +<br>                <span class="hljs-string">&quot; .-------.       ____     __        \n&quot;</span> +<br>                <span class="hljs-string">&quot; |  _ _   \\      \\   \\   /  /    \n&quot;</span> +<br>                <span class="hljs-string">&quot; | ( &#x27; )  |       \\  _. /  &#x27;       \n&quot;</span> +<br>                <span class="hljs-string">&quot; |(_ o _) /        _( )_ .&#x27;         \n&quot;</span> +<br>                <span class="hljs-string">&quot; | (_,_).&#x27; __  ___(_ o _)&#x27;          \n&quot;</span> +<br>                <span class="hljs-string">&quot; |  |\\ \\  |  ||   |(_,_)&#x27;         \n&quot;</span> +<br>                <span class="hljs-string">&quot; |  | \\ `&#x27;   /|   `-&#x27;  /           \n&quot;</span> +<br>                <span class="hljs-string">&quot; |  |  \\    /  \\      /           \n&quot;</span> +<br>                <span class="hljs-string">&quot; &#x27;&#x27;-&#x27;   `&#x27;-&#x27;    `-..-&#x27;              &quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(String... args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        configService.init();<br>        jobService.init();<br>        dictTypeService.init();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="å¯åŠ¨é¡¹ç›®"><a href="#å¯åŠ¨é¡¹ç›®" class="headerlink" title="å¯åŠ¨é¡¹ç›®"></a>å¯åŠ¨é¡¹ç›®</h2><p>ä»£ç ç¼–å†™å¥½ä»¥åï¼Œæˆ‘ä»¬åœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ª<code>ry-vue</code>çš„æ•°æ®åº“ï¼Œåœ¨<code>RuoYi-Vue\ruoyi-admin\src\main\resources\application.yml</code>ä¸‹ä¿®æ”¹æ•°æ®åº“è¿æ¥å’Œæ•°æ®åº“å¯†ç ç­‰ä¿¡æ¯ã€‚</p><p>å¯åŠ¨æˆåŠŸä»¥åï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°<code>ry-vue</code>çš„æ•°æ®åº“ä¸­è¡¨ç»“æ„å·²ç»åˆ›å»ºå®Œæˆã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><blockquote><p><a href="https://gitee.com/kidKing/ruoyi-docker-flyway">https://gitee.com/kidKing/ruoyi-docker-flyway</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;æ·»åŠ flywayä¾èµ–&quot;&gt;&lt;a href=&quot;#æ·»åŠ flywayä¾èµ–&quot; class=&quot;headerlink&quot; title=&quot;æ·»åŠ flywayä¾èµ–&quot;&gt;&lt;/a&gt;æ·»åŠ flywayä¾èµ–&lt;/h2&gt;&lt;p&gt;åœ¨æ ¹ç›®å½•ä¸‹&lt;code&gt;pom.xml&lt;/code&gt;æ·»åŠ flywayä¾èµ–&lt;co</summary>
      
    
    
    
    <category term="Java" scheme="https://www.songhaozhi.com/categories/Java/"/>
    
    
    <category term="Java" scheme="https://www.songhaozhi.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Dockerå¸¸ç”¨å‘½ä»¤è®°å½•</title>
    <link href="https://www.songhaozhi.com/2022/09/07/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/"/>
    <id>https://www.songhaozhi.com/2022/09/07/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/</id>
    <published>2022-09-07T02:30:36.000Z</published>
    <updated>2022-11-14T03:45:42.972Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡æ–‡ç« ä»¥å®‰è£…MySQLæ•°æ®åº“ä¸ºä¾‹å­ï¼Œè®°å½•Dockerå¸¸ç”¨å‘½ä»¤</p><h2 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> docker -y<br></code></pre></td></tr></table></figure><h2 id="dockerå®¹å™¨äº’è”"><a href="#dockerå®¹å™¨äº’è”" class="headerlink" title="dockerå®¹å™¨äº’è”"></a>dockerå®¹å™¨äº’è”</h2><h3 id="æ–°å»ºç½‘ç»œ"><a href="#æ–°å»ºç½‘ç»œ" class="headerlink" title="æ–°å»ºç½‘ç»œ"></a>æ–°å»ºç½‘ç»œ</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">docker network create <span class="hljs-keyword">my</span>-net<br></code></pre></td></tr></table></figure><h3 id="åˆ—å‡ºæ‰€æœ‰ç½‘ç»œ"><a href="#åˆ—å‡ºæ‰€æœ‰ç½‘ç»œ" class="headerlink" title="åˆ—å‡ºæ‰€æœ‰ç½‘ç»œ"></a>åˆ—å‡ºæ‰€æœ‰ç½‘ç»œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker network <span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure><h3 id="å°†å®¹å™¨è¿æ¥åˆ°ç½‘ç»œ"><a href="#å°†å®¹å™¨è¿æ¥åˆ°ç½‘ç»œ" class="headerlink" title="å°†å®¹å™¨è¿æ¥åˆ°ç½‘ç»œ"></a>å°†å®¹å™¨è¿æ¥åˆ°ç½‘ç»œ</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">docker network <span class="hljs-keyword">connect</span> <span class="hljs-keyword">my</span>-net mysql<br></code></pre></td></tr></table></figure><h3 id="æ–­å¼€å®¹å™¨çš„ç½‘ç»œ"><a href="#æ–­å¼€å®¹å™¨çš„ç½‘ç»œ" class="headerlink" title="æ–­å¼€å®¹å™¨çš„ç½‘ç»œ"></a>æ–­å¼€å®¹å™¨çš„ç½‘ç»œ</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">docker network disconnect <span class="hljs-keyword">my</span>-net mysql<br></code></pre></td></tr></table></figure><h3 id="åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œ"><a href="#åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œ" class="headerlink" title="åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œ"></a>åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œ</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata">docker network <span class="hljs-keyword">rm</span> my-<span class="hljs-keyword">net</span><br></code></pre></td></tr></table></figure><h2 id="dockerå®¢æˆ·ç«¯"><a href="#dockerå®¢æˆ·ç«¯" class="headerlink" title="dockerå®¢æˆ·ç«¯"></a>dockerå®¢æˆ·ç«¯</h2><h3 id="å®¹å™¨ä½¿ç”¨"><a href="#å®¹å™¨ä½¿ç”¨" class="headerlink" title="å®¹å™¨ä½¿ç”¨"></a>å®¹å™¨ä½¿ç”¨</h3><h4 id="æœç´¢é•œåƒ"><a href="#æœç´¢é•œåƒ" class="headerlink" title="æœç´¢é•œåƒ"></a>æœç´¢é•œåƒ</h4><p>è¿™é‡Œæˆ‘ä»¬æœç´¢<code>mysql</code>é•œåƒ</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">docker search mysql</span><br></code></pre></td></tr></table></figure><h4 id="è·å–MySQLé•œåƒ"><a href="#è·å–MySQLé•œåƒ" class="headerlink" title="è·å–MySQLé•œåƒ"></a>è·å–<code>MySQL</code>é•œåƒ</h4><p>ä¸‹è½½éœ€è¦çš„ç‰ˆæœ¬<code>docker pull mysql:tag</code> </p><p><code>tag</code>ä»£è¡¨ç‰ˆæœ¬å·ï¼Œæ²¡æœ‰ä»£è¡¨æ˜¯<code>lastest</code>çš„</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> pull docker.io/mysql:<span class="hljs-number">5</span>.<span class="hljs-number">7</span>.<span class="hljs-number">26</span><br></code></pre></td></tr></table></figure><h4 id="åˆ—å‡ºæœ¬åœ°é•œåƒ"><a href="#åˆ—å‡ºæœ¬åœ°é•œåƒ" class="headerlink" title="åˆ—å‡ºæœ¬åœ°é•œåƒ"></a>åˆ—å‡ºæœ¬åœ°é•œåƒ</h4><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">docker images <span class="hljs-comment">[OPTIONS]</span> <span class="hljs-comment">[REPOSITORY<span class="hljs-comment">[:TAG]</span>]</span><br></code></pre></td></tr></table></figure><div class="note note-info">            <p><strong>OPTIONSè¯´æ˜</strong></p><ul><li><p>-a :åˆ—å‡ºæœ¬åœ°æ‰€æœ‰çš„é•œåƒï¼ˆå«ä¸­é—´æ˜ åƒå±‚ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿‡æ»¤æ‰ä¸­é—´æ˜ åƒå±‚ï¼‰ï¼›</p></li><li><p>â€“digests :æ˜¾ç¤ºé•œåƒçš„æ‘˜è¦ä¿¡æ¯ï¼›</p></li><li><p>-f :æ˜¾ç¤ºæ»¡è¶³æ¡ä»¶çš„é•œåƒï¼›</p></li><li><p>â€“format :æŒ‡å®šè¿”å›å€¼çš„æ¨¡æ¿æ–‡ä»¶ï¼›</p></li><li><p>â€“no-trunc :æ˜¾ç¤ºå®Œæ•´çš„é•œåƒä¿¡æ¯ï¼›</p></li><li><p>-q :åªæ˜¾ç¤ºé•œåƒIDã€‚</p></li></ul>          </div><h4 id="åˆ›å»º-MySQL-æ•°æ®ç›®å½•"><a href="#åˆ›å»º-MySQL-æ•°æ®ç›®å½•" class="headerlink" title="åˆ›å»º MySQL æ•°æ®ç›®å½•"></a>åˆ›å»º MySQL æ•°æ®ç›®å½•</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir -p <span class="hljs-regexp">/opt/my</span>sql<br></code></pre></td></tr></table></figure><h3 id="å¯åŠ¨MySQLå®ä¾‹"><a href="#å¯åŠ¨MySQLå®ä¾‹" class="headerlink" title="å¯åŠ¨MySQLå®ä¾‹"></a>å¯åŠ¨<code>MySQL</code>å®ä¾‹</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">docker run --name mysql -p <span class="hljs-number">3306</span>:<span class="hljs-number">3306</span> --privileged=<span class="hljs-keyword">true</span> -v <span class="hljs-regexp">/opt/my</span>sql<span class="hljs-regexp">/log:/</span>var<span class="hljs-regexp">/log/my</span>sql -v <span class="hljs-regexp">/opt/my</span>sql<span class="hljs-regexp">/conf:/</span>etc<span class="hljs-regexp">/mysql -v /</span>opt<span class="hljs-regexp">/mysql/</span>data:<span class="hljs-regexp">/var/</span>lib/mysql -e MYSQL_ROOT_PASSWORD=<span class="hljs-number">123456</span> --net my-net --restart=unless-stopped -d mysql:<span class="hljs-number">5.7</span>.<span class="hljs-number">26</span><br></code></pre></td></tr></table></figure><div class="note note-info">            <p><strong>Tips</strong></p><ul><li><p><code>-e MYSQL_ROOT_PASSWORD=123456</code>å‘½ä»¤: æŒ‡å®šMySQLçš„ç™»å½•å¯†ç ä¸º <code>123456</code></p></li><li><p><code>-v /opt/mysql/data:/var/lib/mysql</code> å‘½ä»¤: å°†å®¿ä¸»æœºçš„ç›®å½• <code>/opt/mysql</code> æŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨çš„ç›®å½• <code>/var/lib/mysql</code>ï¼Œé»˜è®¤æƒ…å†µä¸‹ <code>MySQL</code> å°†å‘ <code>/opt/mysql</code> å†™å…¥å…¶æ•°æ®æ–‡ä»¶ã€‚</p></li><li><p><code>-v /opt/mysql/conf:/etc/mysql</code>å‘½ä»¤ï¼šMySQLé…ç½®æ–‡ä»¶å­˜æ”¾ä½ç½®</p></li><li><p><code> -v /opt/mysql/log:/var/log/mysql</code>å‘½ä»¤ï¼šMySQLæ—¥å¿—æ–‡ä»¶</p></li><li><p><code>--net my-net</code>å‘½ä»¤: å°†è¯¥å®¹å™¨åŠ å…¥åˆ° <code>my-net</code> ç½‘ç»œ,è¿æ¥åˆ° <code>my-net</code> ç½‘ç»œçš„ä»»ä½•å…¶ä»–å®¹å™¨éƒ½å¯ä»¥è®¿é—® <code>mysql</code> å®¹å™¨ä¸Šçš„æ‰€æœ‰ç«¯å£ã€‚</p></li><li><p><code>--restart=unless-stopped</code>å‘½ä»¤ï¼šåœ¨å®¹å™¨é€€å‡ºæ—¶æ€»æ˜¯é‡å¯å®¹å™¨ï¼Œä½†æ˜¯ä¸è€ƒè™‘åœ¨Dockerå®ˆæŠ¤è¿›ç¨‹å¯åŠ¨æ—¶å°±å·²ç»åœæ­¢äº†çš„å®¹å™¨ </p></li><li><p><code>-d</code>å‘½ä»¤ï¼šè¡¨ç¤ºåå°è¿è¡Œ</p></li><li><p><code>-p 3306:3306</code>å‘½ä»¤ï¼šç«¯å£æ˜ å°„</p></li><li><p><code>--privileged=true</code>å‘½ä»¤ï¼šcontainerå†…çš„rootæ‹¥æœ‰çœŸæ­£çš„rootæƒé™</p></li></ul>          </div><h3 id="æŸ¥çœ‹dockerå®¹å™¨è¿è¡Œæƒ…å†µ"><a href="#æŸ¥çœ‹dockerå®¹å™¨è¿è¡Œæƒ…å†µ" class="headerlink" title="æŸ¥çœ‹dockerå®¹å™¨è¿è¡Œæƒ…å†µ"></a>æŸ¥çœ‹dockerå®¹å™¨è¿è¡Œæƒ…å†µ</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">docker ps</span><br></code></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨"><a href="#æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨"></a>æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">docker ps -<span class="hljs-selector-tag">a</span><br></code></pre></td></tr></table></figure><h3 id="å¯åŠ¨ä¸€ä¸ªå·²åœæ­¢çš„å®¹å™¨"><a href="#å¯åŠ¨ä¸€ä¸ªå·²åœæ­¢çš„å®¹å™¨" class="headerlink" title="å¯åŠ¨ä¸€ä¸ªå·²åœæ­¢çš„å®¹å™¨"></a>å¯åŠ¨ä¸€ä¸ªå·²åœæ­¢çš„å®¹å™¨</h3><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xquery">docker <span class="hljs-keyword">start</span> å®¹<span class="hljs-built_in">å™¨id</span><br></code></pre></td></tr></table></figure><h3 id="åœæ­¢ä¸€ä¸ªå®¹å™¨"><a href="#åœæ­¢ä¸€ä¸ªå®¹å™¨" class="headerlink" title="åœæ­¢ä¸€ä¸ªå®¹å™¨"></a>åœæ­¢ä¸€ä¸ªå®¹å™¨</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">docker stop &lt;å®¹å™¨ ID&gt;<br></code></pre></td></tr></table></figure><p>åœæ­¢çš„å®¹å™¨å¯ä»¥é€šè¿‡ docker restart é‡å¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">docker restart <span class="hljs-tag">&lt;<span class="hljs-name">å®¹å™¨</span> <span class="hljs-attr">ID</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="è¿›å…¥MySQLå®¹å™¨"><a href="#è¿›å…¥MySQLå®¹å™¨" class="headerlink" title="è¿›å…¥MySQLå®¹å™¨"></a>è¿›å…¥MySQLå®¹å™¨</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker exec -it mysql <span class="hljs-regexp">/bin/</span>bash<br></code></pre></td></tr></table></figure><div class="note note-info">            <p><strong>Tips</strong></p><ul><li>-i: äº¤äº’å¼æ“ä½œã€‚</li><li>-t: ç»ˆç«¯ã€‚</li><li>mysql: mysql é•œåƒã€‚</li><li>&#x2F;bin&#x2F;bashï¼šæ”¾åœ¨é•œåƒååçš„æ˜¯å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸ªäº¤äº’å¼ Shellï¼Œå› æ­¤ç”¨çš„æ˜¯ &#x2F;bin&#x2F;bashã€‚</li></ul>          </div><h3 id="é€€å‡ºå®¹å™¨"><a href="#é€€å‡ºå®¹å™¨" class="headerlink" title="é€€å‡ºå®¹å™¨"></a>é€€å‡ºå®¹å™¨</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-keyword">exit</span><br></code></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><blockquote><p><a href="https://www.runoob.com/docker/docker-tutorial.html">https://www.runoob.com/docker/docker-tutorial.html</a></p></blockquote><blockquote><p><a href="https://docs.halo.run/getting-started/install/other/docker-mysql">https://docs.halo.run/getting-started/install/other/docker-mysql</a></p></blockquote><blockquote><p><a href="https://www.yiibai.com/docker/docker-introduction.html">https://www.yiibai.com/docker/docker-introduction.html</a></p></blockquote><blockquote><p><a href="https://www.jianshu.com/p/68ec752f0454">https://www.jianshu.com/p/68ec752f0454</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ¬ç¯‡æ–‡ç« ä»¥å®‰è£…MySQLæ•°æ®åº“ä¸ºä¾‹å­ï¼Œè®°å½•Dockerå¸¸ç”¨å‘½ä»¤&lt;/p&gt;
&lt;h2 id=&quot;å®‰è£…docker&quot;&gt;&lt;a href=&quot;#å®‰è£…docker&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…docker&quot;&gt;&lt;/a&gt;å®‰è£…docker&lt;/h2&gt;&lt;figure cl</summary>
      
    
    
    
    <category term="Docker" scheme="https://www.songhaozhi.com/categories/Docker/"/>
    
    
    <category term="Docker" scheme="https://www.songhaozhi.com/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>vueå­¦ä¹ ç¬”è®°å››-åˆ—è¡¨æ¸²æŸ“</title>
    <link href="https://www.songhaozhi.com/2022/09/05/vue%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9B-%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93/"/>
    <id>https://www.songhaozhi.com/2022/09/05/vue%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%9B%9B-%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93/</id>
    <published>2022-09-05T07:21:55.000Z</published>
    <updated>2022-11-14T03:45:42.972Z</updated>
    
    <content type="html"><![CDATA[<h2 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a><code>v-for</code></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">&lt;template&gt;<br>Â <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">Â  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;user in userList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;user.id&quot;</span>&gt;</span>id:&#123;&#123; user.id &#125;&#125; Â name:&#123;&#123; user.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">Â <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;list&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">Â  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  <span class="hljs-attr">userList</span>: [</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  Â  &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span> &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  Â  &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;æå››&quot;</span> &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  ],</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  &#125;;</span></span><br><span class="language-javascript"><span class="language-xml">Â  &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="ç»´æŠ¤çŠ¶æ€"><a href="#ç»´æŠ¤çŠ¶æ€" class="headerlink" title="ç»´æŠ¤çŠ¶æ€"></a>ç»´æŠ¤çŠ¶æ€</h2><p>å½“Vueæ­£åœ¨æ›´æ–°ä½¿ç”¨<code>v-for</code>æ¸²æŸ“çš„å…ƒç´ åˆ—è¡¨æ—¶ï¼Œå®ƒé»˜è®¤ä½¿ç”¨â€œå°±åœ°æ›´æ–°çš„ç­–ç•¥ã€‚å¦‚æœæ•°æ®é¡¹çš„é¡ºåºè¢«æ”¹å˜ï¼ŒVueå°†ä¸ä¼šç§»åŠ¨DOMå…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„é¡ºåºï¼Œè€Œæ˜¯å°±åœ°æ›´æ–°æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ç¡®ä¿å®ƒä»¬åœ¨æ¯ä¸ªç´¢å¼•çš„ä½ç½®æ­£ç¡®æ¸²æŸ“ã€‚</p><p>ä¸ºäº†ç»™Vueä¸€ä¸ªæç¤ºï¼Œä»¥ä¾¿å®ƒèƒ½è·Ÿè¸ªæ¯ä¸ªèŠ‚ç‚¹çš„èº«ä»½ï¼Œä»è€Œé‡ç”¨å’Œé‡æ–°æ’åºç°æœ‰å…ƒç´ ï¼Œä½ éœ€è¦ä¸ºæ¯é¡¹æä¾›ä¸€ä¸ªå”¯ä¸€çš„<code>key</code>attribute</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><br>&lt;li v-<span class="hljs-keyword">for</span>=<span class="hljs-string">&quot;user in userList&quot;</span> :key=<span class="hljs-string">&quot;user.id&quot;</span>&gt;<span class="hljs-attr">id</span>:&#123;&#123; user.<span class="hljs-property">id</span> &#125;&#125;  <span class="hljs-attr">name</span>:&#123;&#123; user.<span class="hljs-property">name</span> &#125;&#125;&lt;/li&gt;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;v-for&quot;&gt;&lt;a href=&quot;#v-for&quot; class=&quot;headerlink&quot; title=&quot;v-for&quot;&gt;&lt;/a&gt;&lt;code&gt;v-for&lt;/code&gt;&lt;/h2&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;</summary>
      
    
    
    
    <category term="Webå‰ç«¯" scheme="https://www.songhaozhi.com/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="Vue" scheme="https://www.songhaozhi.com/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>vueå­¦ä¹ ç¬”è®°ä¸‰æ¡ä»¶æ¸²æŸ“</title>
    <link href="https://www.songhaozhi.com/2022/09/02/conditional/"/>
    <id>https://www.songhaozhi.com/2022/09/02/conditional/</id>
    <published>2022-09-02T10:25:03.000Z</published>
    <updated>2022-11-14T03:45:42.972Z</updated>
    
    <content type="html"><![CDATA[<h2 id="v-if"><a href="#v-if" class="headerlink" title="v-if"></a><code>v-if</code></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">&lt;template&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;flag&quot;</span>&gt;</span>çœŸ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>&lt;/template&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;conditional&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">Â  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  <span class="hljs-attr">flag</span>: <span class="hljs-literal">true</span></span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  &#125;;</span></span><br><span class="language-javascript"><span class="language-xml">Â  &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="v-else"><a href="#v-else" class="headerlink" title="v-else"></a><code>v-else</code></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><br>&lt;template&gt;<br>Â  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;flag = !flag&quot;</span>&gt;</span>æ”¹å˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;flag&quot;</span>&gt;</span>çœŸ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-else</span>&gt;</span>å‡<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>&lt;/template&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;conditional&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">Â  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  <span class="hljs-attr">flag</span>: <span class="hljs-literal">true</span></span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  &#125;;</span></span><br><span class="language-javascript"><span class="language-xml">Â  &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="v-else-if"><a href="#v-else-if" class="headerlink" title="v-else-if"></a><code>v-else-if</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">&lt;template&gt;<br>Â  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;type === &#x27;A&#x27;&quot;</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>Â  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">&quot;type === &#x27;B&#x27;&quot;</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>Â  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">&quot;type === &#x27;C&#x27;&quot;</span>&gt;</span>C<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>Â  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span>&gt;</span>ä¸å­˜åœ¨<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;conditional&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">Â  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  <span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;A&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  &#125;;</span></span><br><span class="language-javascript"><span class="language-xml">Â  &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br></code></pre></td></tr></table></figure><h2 id="v-show"><a href="#v-show" class="headerlink" title="v-show"></a><code>v-show</code></h2><p>å¦ä¸€ä¸ªå¯ä»¥ç”¨æ¥æŒ‰æ¡ä»¶æ˜¾ç¤ºä¸€ä¸ªå…ƒç´ çš„æŒ‡ä»¤æ˜¯Â <code>v-show</code>ã€‚å…¶ç”¨æ³•åŸºæœ¬ä¸€æ ·ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">&lt;h1 v-show=<span class="hljs-string">&quot;flag&quot;</span>&gt;<span class="hljs-title class_">Hello</span>!&lt;/h1&gt;<br></code></pre></td></tr></table></figure><p>ä¸åŒä¹‹å¤„åœ¨äºÂ <code>v-show</code>Â ä¼šåœ¨ DOM æ¸²æŸ“ä¸­ä¿ç•™è¯¥å…ƒç´ ï¼›<code>v-show</code>Â ä»…åˆ‡æ¢äº†è¯¥å…ƒç´ ä¸Šåä¸ºÂ <code>display</code>Â çš„ CSS å±æ€§ã€‚</p><p><code>v-show</code>Â ä¸æ”¯æŒåœ¨Â <code>&lt;template&gt;</code>Â å…ƒç´ ä¸Šä½¿ç”¨ï¼Œä¹Ÿä¸èƒ½å’ŒÂ <code>v-else</code>Â æ­é…ä½¿ç”¨</p><h2 id="v-if-vs-v-show"><a href="#v-if-vs-v-show" class="headerlink" title="v-ifÂ vsÂ v-show"></a><code>v-if</code>Â vsÂ <code>v-show</code></h2><p><code>v-if</code>Â æ˜¯â€œçœŸå®çš„â€æŒ‰æ¡ä»¶æ¸²æŸ“ï¼Œå› ä¸ºå®ƒç¡®ä¿äº†åœ¨åˆ‡æ¢æ—¶ï¼Œæ¡ä»¶åŒºå—å†…çš„äº‹ä»¶ç›‘å¬å™¨å’Œå­ç»„ä»¶éƒ½ä¼šè¢«é”€æ¯ä¸é‡å»ºã€‚</p><p><code>v-if</code>Â ä¹Ÿæ˜¯<strong>æƒ°æ€§</strong>çš„ï¼šå¦‚æœåœ¨åˆæ¬¡æ¸²æŸ“æ—¶æ¡ä»¶å€¼ä¸º falseï¼Œåˆ™ä¸ä¼šåšä»»ä½•äº‹ã€‚æ¡ä»¶åŒºå—åªæœ‰å½“æ¡ä»¶é¦–æ¬¡å˜ä¸º true æ—¶æ‰è¢«æ¸²æŸ“ã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<code>v-show</code>Â ç®€å•è®¸å¤šï¼Œå…ƒç´ æ— è®ºåˆå§‹æ¡ä»¶å¦‚ä½•ï¼Œå§‹ç»ˆä¼šè¢«æ¸²æŸ“ï¼Œåªæœ‰ CSSÂ <code>display</code>Â å±æ€§ä¼šè¢«åˆ‡æ¢ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œ<code>v-if</code>Â æœ‰æ›´é«˜çš„åˆ‡æ¢å¼€é”€ï¼Œè€ŒÂ <code>v-show</code>Â æœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“å¼€é”€ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦é¢‘ç¹åˆ‡æ¢ï¼Œåˆ™ä½¿ç”¨Â <code>v-show</code>Â è¾ƒå¥½ï¼›å¦‚æœåœ¨è¿è¡Œæ—¶ç»‘å®šæ¡ä»¶å¾ˆå°‘æ”¹å˜ï¼Œåˆ™Â <code>v-if</code>Â ä¼šæ›´åˆé€‚ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;v-if&quot;&gt;&lt;a href=&quot;#v-if&quot; class=&quot;headerlink&quot; title=&quot;v-if&quot;&gt;&lt;/a&gt;&lt;code&gt;v-if&lt;/code&gt;&lt;/h2&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td </summary>
      
    
    
    
    <category term="Webå‰ç«¯" scheme="https://www.songhaozhi.com/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="Vue" scheme="https://www.songhaozhi.com/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>vueå­¦ä¹ ç¬”è®°äºŒæ¨¡æ¿è¯­æ³•</title>
    <link href="https://www.songhaozhi.com/2022/09/02/template-syntax/"/>
    <id>https://www.songhaozhi.com/2022/09/02/template-syntax/</id>
    <published>2022-09-02T10:23:45.000Z</published>
    <updated>2022-11-14T03:45:42.972Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ–‡æœ¬æ’å€¼"><a href="#æ–‡æœ¬æ’å€¼" class="headerlink" title="æ–‡æœ¬æ’å€¼"></a>æ–‡æœ¬æ’å€¼</h2><p>æœ€åŸºæœ¬çš„æ•°æ®ç»‘å®šå½¢å¼æ˜¯æ–‡æœ¬æ’å€¼ï¼Œå®ƒä½¿ç”¨çš„æ˜¯â€œMustacheâ€è¯­æ³• (å³åŒå¤§æ‹¬å·)ï¼š</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Message: </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">msg</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>åŒå¤§æ‹¬å·æ ‡ç­¾ä¼šè¢«æ›¿æ¢ä¸ºç›¸åº”ç»„ä»¶å®ä¾‹ä¸­Â <code>msg</code>Â å±æ€§çš„å€¼ã€‚åŒæ—¶æ¯æ¬¡Â <code>msg</code>Â å±æ€§æ›´æ”¹æ—¶å®ƒä¹Ÿä¼šåŒæ­¥æ›´æ–°                                               ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">&lt;template&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span> Messageï¼š&#123;&#123;msg&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;text&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">Â  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  <span class="hljs-keyword">return</span>&#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  Â  <span class="hljs-attr">msg</span>:<span class="hljs-string">&quot;æ¶ˆæ¯æé†’&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  &#125;</span></span><br><span class="language-javascript"><span class="language-xml">Â  &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="åŸå§‹-HTML"><a href="#åŸå§‹-HTML" class="headerlink" title="åŸå§‹ HTML"></a>åŸå§‹ HTML</h2><p>åŒå¤§æ‹¬å·å°†ä¼šå°†æ•°æ®æ’å€¼ä¸ºçº¯æ–‡æœ¬ï¼Œè€Œä¸æ˜¯ HTMLã€‚è‹¥æƒ³æ’å…¥ HTMLï¼Œä½ éœ€è¦ä½¿ç”¨Â <a href="https://cn.vuejs.org/api/built-in-directives.html#v-html"><code>v-html</code>Â æŒ‡ä»¤</a>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><br>&lt;template&gt;<br>Â  Â  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ’å€¼æ–¹å¼ï¼š&#123;&#123;rawHtml&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> &gt;</span>HTMLæ–¹å¼:<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">&quot;rawHtml&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span>&#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;RawHtml&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  Â  <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  Â  <span class="hljs-attr">rawHtml</span>:<span class="hljs-string">&quot;&lt;a href=&#x27;http://www.baidu.com&#x27;&gt;ç™¾åº¦&lt;/a&gt;&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  &#125;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="Attribute-ç»‘å®š"><a href="#Attribute-ç»‘å®š" class="headerlink" title="Attribute ç»‘å®š"></a>Attribute ç»‘å®š</h2><p>åŒå¤§æ‹¬å·ä¸èƒ½åœ¨ HTML attributes ä¸­ä½¿ç”¨ã€‚æƒ³è¦å“åº”å¼åœ°ç»‘å®šä¸€ä¸ª attributeï¼Œåº”è¯¥ä½¿ç”¨Â <a href="https://cn.vuejs.org/api/built-in-directives.html#v-bind"><code>v-bind</code>Â æŒ‡ä»¤</a>ï¼š</p><div v-bind:id="dynamicId"></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-bind:id</span>=<span class="hljs-string">&quot;dynamicId&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p><code>v-bind</code>Â æŒ‡ä»¤æŒ‡ç¤º Vue å°†å…ƒç´ çš„Â <code>id</code>Â attribute ä¸ç»„ä»¶çš„Â <code>dynamicId</code>Â å±æ€§ä¿æŒä¸€è‡´ã€‚å¦‚æœç»‘å®šçš„å€¼æ˜¯Â <code>null</code>Â æˆ–è€…Â <code>undefined</code>ï¼Œé‚£ä¹ˆè¯¥ attribute å°†ä¼šä»æ¸²æŸ“çš„å…ƒç´ ä¸Šç§»é™¤ã€‚</p><h3 id="ç®€å†™"><a href="#ç®€å†™" class="headerlink" title="ç®€å†™"></a>ç®€å†™</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:id</span>=<span class="hljs-string">&quot;dynamicId&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å¼€å¤´ä¸ºÂ <code>:</code>Â çš„ attribute å¯èƒ½å’Œä¸€èˆ¬çš„ HTML attribute çœ‹èµ·æ¥ä¸å¤ªä¸€æ ·ï¼Œä½†å®ƒçš„ç¡®æ˜¯åˆæ³•çš„ attribute åç§°å­—ç¬¦ï¼Œå¹¶ä¸”æ‰€æœ‰æ”¯æŒ Vue çš„æµè§ˆå™¨éƒ½èƒ½æ­£ç¡®è§£æå®ƒã€‚æ­¤å¤–ï¼Œä»–ä»¬ä¸ä¼šå‡ºç°åœ¨æœ€ç»ˆæ¸²æŸ“çš„ DOM ä¸­</p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><br>&lt;template&gt;<br>Â  Â  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-bind:id</span>=<span class="hljs-string">&quot;dynamicId&quot;</span>&gt;</span></span><br><span class="language-xml">Â  Â  Â  Â  Attribute ç»‘å®šID</span><br><span class="language-xml">Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>Â  Â  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:id</span>=<span class="hljs-string">&quot;dynamicId&quot;</span>&gt;</span></span><br><span class="language-xml">Â  Â  Â  Â  Attribute ç»‘å®šID ç®€å†™</span><br><span class="language-xml">Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br>  <br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;attributeBindings&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  Â  <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  Â  Â  Â  <span class="hljs-attr">dynamicId</span>: <span class="hljs-string">&quot;10001&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  Â  &#125;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-JavaScript-è¡¨è¾¾å¼"><a href="#ä½¿ç”¨-JavaScript-è¡¨è¾¾å¼" class="headerlink" title="ä½¿ç”¨ JavaScript è¡¨è¾¾å¼"></a>ä½¿ç”¨ JavaScript è¡¨è¾¾å¼</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">&lt;template&gt;<br>Â  Â  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;number +1&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>isok:&#123;&#123;ok ? &#x27;YES&#x27;:&#x27;NO&#x27; &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>message:&#123;&#123;message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;)&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">Â  Â  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;JavaScript&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  Â  <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  Â  Â  Â  <span class="hljs-attr">number</span>:<span class="hljs-number">10</span>,</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  Â  Â  Â  <span class="hljs-attr">ok</span>:<span class="hljs-string">&#x27;YES&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  Â  Â  Â  <span class="hljs-attr">message</span>:<span class="hljs-string">&#x27;Hello&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  Â  Â  &#125;</span></span><br><span class="language-javascript"><span class="language-xml">Â  Â  &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br></code></pre></td></tr></table></figure><p>è¿™äº›è¡¨è¾¾å¼ä¼šåœ¨å½“å‰æ´»åŠ¨å®ä¾‹çš„æ•°æ®ä½œç”¨åŸŸä¸‹ä½œä¸ºJavaScriptè¢«è§£æã€‚æœ‰ä¸ªé™åˆ¶å°±æ˜¯ï¼Œæ¯ä¸ªç»‘å®šéƒ½åªèƒ½åŒ…å«<strong>å•ä¸ªè¡¨è¾¾å¼</strong>ï¼Œæ‰€ä»¥ä¸‹é¢çš„ä¾‹å­éƒ½<strong>ä¸ä¼š</strong>ç”Ÿæ•ˆã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">&lt;!-- è¿™æ˜¯è¯­å¥ï¼Œä¸æ˜¯è¡¨è¾¾å¼--&gt;<br>&#123;&#123; <span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span> &#125;&#125;<br><br>&lt;!--æµç¨‹æ§åˆ¶ä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼Œè¯·ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼--&gt;<br>&#123;&#123;<span class="hljs-keyword">if</span>(ok) &#123; <span class="hljs-keyword">return</span> message &#125;&#125;&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;æ–‡æœ¬æ’å€¼&quot;&gt;&lt;a href=&quot;#æ–‡æœ¬æ’å€¼&quot; class=&quot;headerlink&quot; title=&quot;æ–‡æœ¬æ’å€¼&quot;&gt;&lt;/a&gt;æ–‡æœ¬æ’å€¼&lt;/h2&gt;&lt;p&gt;æœ€åŸºæœ¬çš„æ•°æ®ç»‘å®šå½¢å¼æ˜¯æ–‡æœ¬æ’å€¼ï¼Œå®ƒä½¿ç”¨çš„æ˜¯â€œMustacheâ€è¯­æ³• (å³åŒå¤§æ‹¬å·)ï¼š&lt;/p&gt;
&lt;figure class=&quot;</summary>
      
    
    
    
    <category term="Webå‰ç«¯" scheme="https://www.songhaozhi.com/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="Vue" scheme="https://www.songhaozhi.com/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>vueå­¦ä¹ ç¬”è®°ä¸€åˆ›å»ºé¡¹ç›®</title>
    <link href="https://www.songhaozhi.com/2022/09/02/create-vue-project/"/>
    <id>https://www.songhaozhi.com/2022/09/02/create-vue-project/</id>
    <published>2022-09-02T10:08:13.000Z</published>
    <updated>2022-11-14T03:45:42.972Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><p>1.é‡‡ç”¨Vite é©±åŠ¨çš„ Vue é¡¹ç›®</p><p> <img src="/2022/09/02/create-vue-project/20220902114652.png"></p><p>2.å¯åŠ¨é¡¹ç›®</p><p> <img src="/2022/09/02/create-vue-project/20220902114829.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;åˆ›å»ºé¡¹ç›®&quot;&gt;&lt;a href=&quot;#åˆ›å»ºé¡¹ç›®&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºé¡¹ç›®&quot;&gt;&lt;/a&gt;åˆ›å»ºé¡¹ç›®&lt;/h2&gt;&lt;p&gt;1.é‡‡ç”¨Vite é©±åŠ¨çš„ Vue é¡¹ç›®&lt;/p&gt;
&lt;p&gt; &lt;img src=&quot;/2022/09/02/create-vue-p</summary>
      
    
    
    
    <category term="Webå‰ç«¯" scheme="https://www.songhaozhi.com/categories/Web%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="Vue" scheme="https://www.songhaozhi.com/tags/Vue/"/>
    
  </entry>
  
</feed>
